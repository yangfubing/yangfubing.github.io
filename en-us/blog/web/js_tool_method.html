<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="js_tool_method" />
	<meta name="description" content="js_tool_method" />
	<!-- ç½‘é¡µæ ‡ç­¾æ ‡é¢˜ -->
	<title>js_tool_method</title>
	<link rel="shortcut icon" href="/img/docsite.ico"/>
	<link rel="stylesheet" href="/build/blogDetail.css" />
</head>
<body>
	<div id="root"><div class="blog-detail-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/en-us/index.html"><img class="logo" src="/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">ä¸­</span><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/en-us/index.html" target="_self">HOME</a></li><li class="menu-item menu-item-normal"><a href="/en-us/docs/introduction.html" target="_self">DOCS</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/en-us/blog/index.html" target="_self">BLOG</a></li><li class="menu-item menu-item-normal"><a href="/en-us/community/index.html" target="_self">COMMUNITY</a></li></ul></div></div></header><section class="blog-content markdown-body"><h1>JavaScript å·¥å…·å‡½æ•°å¤§å…¨</h1>
<h2>æ•°ç»„</h2>
<ol>
<li>allï¼šå¸ƒå°”å…¨ç­‰åˆ¤æ–­</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> all = <span class="hljs-function">(<span class="hljs-params">arr, fn = <span class="hljs-built_in">Boolean</span></span>) =&gt;</span> arr.every(fn);

all([<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], x =&gt; x &gt; <span class="hljs-number">1</span>); <span class="hljs-comment">// true</span>
all([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="2">
<li>allEqualï¼šæ£€æŸ¥æ•°ç»„å„é¡¹ç›¸ç­‰</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> allEqual = <span class="hljs-function"><span class="hljs-params">arr</span> =&gt;</span> arr.every(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> val === arr[<span class="hljs-number">0</span>]);

allEqual([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]); <span class="hljs-comment">// false</span>
allEqual([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="3">
<li>approximatelyEqualï¼šçº¦ç­‰äº</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> approximatelyEqual = <span class="hljs-function">(<span class="hljs-params">v1, v2, epsilon = <span class="hljs-number">0.001</span></span>) =&gt;</span> <span class="hljs-built_in">Math</span>.abs(v1 - v2) &lt; epsilon;

approximatelyEqual(<span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">2.0</span>, <span class="hljs-number">1.5708</span>); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="4">
<li>arrayToCSVï¼šæ•°ç»„è½¬CSVæ ¼å¼ï¼ˆå¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼‰</li>
</ol>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> arrayToCSV = <span class="hljs-function">(<span class="hljs-params">arr, delimiter = <span class="hljs-string">','</span></span>) =&gt;</span>
  arr.map(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v.map(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-string">`"<span class="hljs-subst">${x}</span>"`</span>).join(delimiter)).join(<span class="hljs-string">'\n'</span>);
  
arrayToCSV([[<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>], [<span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>]]); <span class="hljs-comment">// '"a","b"\n"c","d"'</span>
arrayToCSV([[<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>], [<span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>]], <span class="hljs-string">';'</span>); <span class="hljs-comment">// '"a";"b"\n"c";"d"'</span>

</code></pre>
<ol start="5">
<li>arrayToHtmlListï¼šæ•°ç»„è½¬liåˆ—è¡¨</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> arrayToHtmlList = <span class="hljs-function">(<span class="hljs-params">arr, listID</span>) =&gt;</span>
  (<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> (
    (el = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#'</span> + listID)),
    (el.innerHTML += arr.map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${item}</span>&lt;/li&gt;`</span>).join(<span class="hljs-string">''</span>))
  ))();
  
arrayToHtmlList([<span class="hljs-string">'item 1'</span>, <span class="hljs-string">'item 2'</span>], <span class="hljs-string">'myListID'</span>);

</code></pre>
<ol start="6">
<li>averageï¼šå¹³å‡æ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> average = <span class="hljs-function">(<span class="hljs-params">...nums</span>) =&gt;</span> nums.reduce(<span class="hljs-function">(<span class="hljs-params">acc, val</span>) =&gt;</span> acc + val, <span class="hljs-number">0</span>) / nums.length;
average(...[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// 2</span>
average(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// 2</span>

</code></pre>
<ol start="7">
<li>averageByï¼šæ•°ç»„å¯¹è±¡å±æ€§å¹³å‡æ•°</li>
</ol>
<p>æ­¤ä»£ç æ®µå°†è·å–æ•°ç»„å¯¹è±¡å±æ€§çš„å¹³å‡å€¼</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> averageBy = <span class="hljs-function">(<span class="hljs-params">arr, fn</span>) =&gt;</span>
  arr.map(<span class="hljs-keyword">typeof</span> fn === <span class="hljs-string">'function'</span> ? fn : <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> val[fn]).reduce(<span class="hljs-function">(<span class="hljs-params">acc, val</span>) =&gt;</span> acc + val, <span class="hljs-number">0</span>) /
  arr.length;
  
averageBy([{ <span class="hljs-attr">n</span>: <span class="hljs-number">4</span> }, { <span class="hljs-attr">n</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">n</span>: <span class="hljs-number">8</span> }, { <span class="hljs-attr">n</span>: <span class="hljs-number">6</span> }], o =&gt; o.n); <span class="hljs-comment">// 5</span>
averageBy([{ <span class="hljs-attr">n</span>: <span class="hljs-number">4</span> }, { <span class="hljs-attr">n</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">n</span>: <span class="hljs-number">8</span> }, { <span class="hljs-attr">n</span>: <span class="hljs-number">6</span> }], <span class="hljs-string">'n'</span>); <span class="hljs-comment">// 5</span>

</code></pre>
<ol start="8">
<li>bifurcateï¼šæ‹†åˆ†æ–­è¨€åçš„æ•°ç»„</li>
</ol>
<p>å¯ä»¥æ ¹æ®æ¯ä¸ªå…ƒç´ è¿”å›çš„å€¼ï¼Œä½¿ç”¨reduce()å’Œpush() å°†å…ƒç´ æ·»åŠ åˆ°ç¬¬äºŒæ¬¡å‚æ•°fnä¸­ ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> bifurcate = <span class="hljs-function">(<span class="hljs-params">arr, filter</span>) =&gt;</span>
  arr.reduce(<span class="hljs-function">(<span class="hljs-params">acc, val, i</span>) =&gt;</span> (acc[filter[i] ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>].push(val), acc), [[], []]);
bifurcate([<span class="hljs-string">'beep'</span>, <span class="hljs-string">'boop'</span>, <span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>], [<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>]); 
<span class="hljs-comment">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span>

</code></pre>
<ol start="9">
<li>castArrayï¼šå…¶å®ƒç±»å‹è½¬æ•°ç»„</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> castArray = <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> (<span class="hljs-built_in">Array</span>.isArray(val) ? val : [val]);

castArray(<span class="hljs-string">'foo'</span>); <span class="hljs-comment">// ['foo']</span>
castArray([<span class="hljs-number">1</span>]); <span class="hljs-comment">// [1]</span>
castArray(<span class="hljs-number">1</span>); <span class="hljs-comment">// [1]</span>

</code></pre>
<ol start="10">
<li>compactï¼šå»é™¤æ•°ç»„ä¸­çš„æ— æ•ˆ/æ— ç”¨å€¼</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> compact = <span class="hljs-function"><span class="hljs-params">arr</span> =&gt;</span> arr.filter(<span class="hljs-built_in">Boolean</span>);

compact([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>, <span class="hljs-number">2</span>, <span class="hljs-string">''</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'a'</span>, <span class="hljs-string">'e'</span> * <span class="hljs-number">23</span>, <span class="hljs-literal">NaN</span>, <span class="hljs-string">'s'</span>, <span class="hljs-number">34</span>]); 
<span class="hljs-comment">// [ 1, 2, 3, 'a', 's', 34 ]</span>

</code></pre>
<ol start="11">
<li>countOccurrencesï¼šæ£€æµ‹æ•°å€¼å‡ºç°æ¬¡æ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> countOccurrences = <span class="hljs-function">(<span class="hljs-params">arr, val</span>) =&gt;</span> arr.reduce(<span class="hljs-function">(<span class="hljs-params">a, v</span>) =&gt;</span> (v === val ? a + <span class="hljs-number">1</span> : a), <span class="hljs-number">0</span>);
countOccurrences([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">1</span>); <span class="hljs-comment">// 3</span>

</code></pre>
<ol start="12">
<li>deepFlattenï¼šé€’å½’æ‰å¹³åŒ–æ•°ç»„</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> deepFlatten = <span class="hljs-function"><span class="hljs-params">arr</span> =&gt;</span> [].concat(...arr.map(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> (<span class="hljs-built_in">Array</span>.isArray(v) ? deepFlatten(v) : v)));

deepFlatten([<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>], [[<span class="hljs-number">3</span>], <span class="hljs-number">4</span>], <span class="hljs-number">5</span>]); <span class="hljs-comment">// [1,2,3,4,5]</span>

</code></pre>
<ol start="13">
<li>differenceï¼šå¯»æ‰¾å·®å¼‚ï¼ˆå¹¶è¿”å›ç¬¬ä¸€ä¸ªæ•°ç»„ç‹¬æœ‰çš„ï¼‰</li>
</ol>
<p>æ­¤ä»£ç æ®µæŸ¥æ‰¾ä¸¤ä¸ªæ•°ç»„ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªæ•°ç»„ç‹¬æœ‰çš„ã€‚</p>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> difference = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(b);
  <span class="hljs-keyword">return</span> a.filter(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> !s.has(x));
};

difference([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]); <span class="hljs-comment">// [3]</span>

</code></pre>
<ol start="14">
<li>differenceByï¼šå…ˆæ‰§è¡Œå†å¯»æ‰¾å·®å¼‚</li>
</ol>
<p>åœ¨å°†ç»™å®šå‡½æ•°åº”ç”¨äºä¸¤ä¸ªåˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ ä¹‹åï¼Œæ­¤æ–¹æ³•è¿”å›ä¸¤ä¸ªæ•°ç»„ä¹‹é—´çš„å·®å¼‚ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> differenceBy = <span class="hljs-function">(<span class="hljs-params">a, b, fn</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(b.map(fn));
  <span class="hljs-keyword">return</span> a.filter(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> !s.has(fn(x)));
};

differenceBy([<span class="hljs-number">2.1</span>, <span class="hljs-number">1.2</span>], [<span class="hljs-number">2.3</span>, <span class="hljs-number">3.4</span>], <span class="hljs-built_in">Math</span>.floor); <span class="hljs-comment">// [1.2]</span>
differenceBy([{ <span class="hljs-attr">x</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">x</span>: <span class="hljs-number">1</span> }], [{ <span class="hljs-attr">x</span>: <span class="hljs-number">1</span> }], v =&gt; v.x); <span class="hljs-comment">// [ { x: 2 } ]</span>

</code></pre>
<ol start="15">
<li>dropWhileï¼šåˆ é™¤ä¸ç¬¦åˆæ¡ä»¶çš„å€¼</li>
</ol>
<p>æ­¤ä»£ç æ®µä»æ•°ç»„é¡¶éƒ¨å¼€å§‹åˆ é™¤å…ƒç´ ï¼Œç›´åˆ°ä¼ é€’çš„å‡½æ•°è¿”å›ä¸ºtrueã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> dropWhile = <span class="hljs-function">(<span class="hljs-params">arr, func</span>) =&gt;</span> {
  <span class="hljs-keyword">while</span> (arr.length &gt; <span class="hljs-number">0</span> &amp;&amp; !func(arr[<span class="hljs-number">0</span>])) arr = arr.slice(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> arr;
};

dropWhile([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], n =&gt; n &gt;= <span class="hljs-number">3</span>); <span class="hljs-comment">// [3,4]</span>

</code></pre>
<ol start="16">
<li>flattenï¼šæŒ‡å®šæ·±åº¦æ‰å¹³åŒ–æ•°ç»„</li>
</ol>
<p>æ­¤ä»£ç æ®µç¬¬äºŒå‚æ•°å¯æŒ‡å®šæ·±åº¦ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> flatten = <span class="hljs-function">(<span class="hljs-params">arr, depth = <span class="hljs-number">1</span></span>) =&gt;</span>
  arr.reduce(<span class="hljs-function">(<span class="hljs-params">a, v</span>) =&gt;</span> a.concat(depth &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">Array</span>.isArray(v) ? flatten(v, depth - <span class="hljs-number">1</span>) : v), []);

flatten([<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>], <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]); <span class="hljs-comment">// [1, 2, 3, 4]</span>
flatten([<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>], <span class="hljs-number">6</span>], <span class="hljs-number">7</span>], <span class="hljs-number">8</span>], <span class="hljs-number">2</span>); <span class="hljs-comment">// [1, 2, 3, [4, 5], 6, 7, 8]</span>

</code></pre>
<ol start="17">
<li>indexOfAllï¼šè¿”å›æ•°ç»„ä¸­æŸå€¼çš„æ‰€æœ‰ç´¢å¼•</li>
</ol>
<p>æ­¤ä»£ç æ®µå¯ç”¨äºè·å–æ•°ç»„ä¸­æŸä¸ªå€¼çš„æ‰€æœ‰ç´¢å¼•ï¼Œå¦‚æœæ­¤å€¼ä¸­æœªåŒ…å«è¯¥å€¼ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> indexOfAll = <span class="hljs-function">(<span class="hljs-params">arr, val</span>) =&gt;</span> arr.reduce(<span class="hljs-function">(<span class="hljs-params">acc, el, i</span>) =&gt;</span> (el === val ? [...acc, i] : acc), []);

indexOfAll([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">1</span>); <span class="hljs-comment">// [0,3]</span>
indexOfAll([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">4</span>); <span class="hljs-comment">// []</span>

</code></pre>
<ol start="18">
<li>intersectionï¼šä¸¤æ•°ç»„çš„äº¤é›†</li>
</ol>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> intersection = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(b);
  <span class="hljs-keyword">return</span> a.filter(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> s.has(x));
};

intersection([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>]); <span class="hljs-comment">// [2, 3]</span>

</code></pre>
<ol start="19">
<li>intersectionWithï¼šä¸¤æ•°ç»„éƒ½ç¬¦åˆæ¡ä»¶çš„äº¤é›†</li>
</ol>
<p>æ­¤ç‰‡æ®µå¯ç”¨äºåœ¨å¯¹ä¸¤ä¸ªæ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œäº†å‡½æ•°ä¹‹åï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„ä¸­å­˜åœ¨çš„å…ƒç´ åˆ—è¡¨ã€‚</p>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> intersectionBy = <span class="hljs-function">(<span class="hljs-params">a, b, fn</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(b.map(fn));
  <span class="hljs-keyword">return</span> a.filter(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> s.has(fn(x)));
};

intersectionBy([<span class="hljs-number">2.1</span>, <span class="hljs-number">1.2</span>], [<span class="hljs-number">2.3</span>, <span class="hljs-number">3.4</span>], <span class="hljs-built_in">Math</span>.floor); <span class="hljs-comment">// [2.1]</span>

</code></pre>
<ol start="20">
<li>intersectionWithï¼šå…ˆæ¯”è¾ƒåè¿”å›äº¤é›†</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> intersectionWith = <span class="hljs-function">(<span class="hljs-params">a, b, comp</span>) =&gt;</span> a.filter(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> b.findIndex(<span class="hljs-function"><span class="hljs-params">y</span> =&gt;</span> comp(x, y)) !== <span class="hljs-number">-1</span>);

intersectionWith([<span class="hljs-number">1</span>, <span class="hljs-number">1.2</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1.9</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3.9</span>], (a, b) =&gt; <span class="hljs-built_in">Math</span>.round(a) === <span class="hljs-built_in">Math</span>.round(b)); <span class="hljs-comment">// [1.5, 3, 0]</span>

</code></pre>
<ol start="21">
<li>minNï¼šè¿”å›æŒ‡å®šé•¿åº¦çš„å‡åºæ•°ç»„</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> minN = <span class="hljs-function">(<span class="hljs-params">arr, n = <span class="hljs-number">1</span></span>) =&gt;</span> [...arr].sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b).slice(<span class="hljs-number">0</span>, n);

minN([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// [1]</span>
minN([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">2</span>); <span class="hljs-comment">// [1,2]</span>

</code></pre>
<ol start="22">
<li>negateï¼šæ ¹æ®æ¡ä»¶åå‘ç­›é€‰</li>
</ol>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> negate = <span class="hljs-function"><span class="hljs-params">func</span> =&gt;</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> !func(...args);

[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>].filter(negate(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>)); <span class="hljs-comment">// [ 1, 3, 5 ]</span>

</code></pre>
<ol start="23">
<li>randomIntArrayInRangeï¼šç”Ÿæˆä¸¤æ•°ä¹‹é—´æŒ‡å®šé•¿åº¦çš„éšæœºæ•°ç»„</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> randomIntArrayInRange = <span class="hljs-function">(<span class="hljs-params">min, max, n = <span class="hljs-number">1</span></span>) =&gt;</span>
  <span class="hljs-built_in">Array</span>.from({ <span class="hljs-attr">length</span>: n }, () =&gt; <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (max - min + <span class="hljs-number">1</span>)) + min);
  
randomIntArrayInRange(<span class="hljs-number">12</span>, <span class="hljs-number">35</span>, <span class="hljs-number">10</span>); <span class="hljs-comment">// [ 34, 14, 27, 17, 30, 27, 20, 26, 21, 14 ]</span>

</code></pre>
<ol start="24">
<li>sampleï¼šåœ¨æŒ‡å®šæ•°ç»„ä¸­è·å–éšæœºæ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> sample = <span class="hljs-function"><span class="hljs-params">arr</span> =&gt;</span> arr[<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * arr.length)];

sample([<span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">11</span>]); <span class="hljs-comment">// 9</span>

</code></pre>
<ol start="25">
<li>sampleSizeï¼šåœ¨æŒ‡å®šæ•°ç»„ä¸­è·å–æŒ‡å®šé•¿åº¦çš„éšæœºæ•°</li>
</ol>
<p>æ­¤ä»£ç æ®µå¯ç”¨äºä»æ•°ç»„ä¸­è·å–æŒ‡å®šé•¿åº¦çš„éšæœºæ•°ï¼Œç›´è‡³ç©·å°½æ•°ç»„ã€‚ ä½¿ç”¨Fisher-Yatesç®—æ³•å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œéšæœºé€‰æ‹©ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> sampleSize = <span class="hljs-function">(<span class="hljs-params">[...arr], n = <span class="hljs-number">1</span></span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> m = arr.length;
  <span class="hljs-keyword">while</span> (m) {
    <span class="hljs-keyword">const</span> i = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * m--);
    [arr[m], arr[i]] = [arr[i], arr[m]];
  }
  <span class="hljs-keyword">return</span> arr.slice(<span class="hljs-number">0</span>, n);
};

sampleSize([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">2</span>); <span class="hljs-comment">// [3,1]</span>
sampleSize([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">4</span>); <span class="hljs-comment">// [2,3,1]</span>

</code></pre>
<ol start="26">
<li>shuffleï¼šâ€œæ´—ç‰Œâ€ æ•°ç»„</li>
</ol>
<p>æ­¤ä»£ç æ®µä½¿ç”¨Fisher-Yatesç®—æ³•éšæœºæ’åºæ•°ç»„çš„å…ƒç´ ã€‚</p>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> shuffle = <span class="hljs-function">(<span class="hljs-params">[...arr]</span>) =&gt;</span> {
  <span class="hljs-keyword">let</span> m = arr.length;
  <span class="hljs-keyword">while</span> (m) {
    <span class="hljs-keyword">const</span> i = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * m--);
    [arr[m], arr[i]] = [arr[i], arr[m]];
  }
  <span class="hljs-keyword">return</span> arr;
};

<span class="hljs-keyword">const</span> foo = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
shuffle(foo); <span class="hljs-comment">// [2, 3, 1], foo = [1, 2, 3]</span>

</code></pre>
<ol start="27">
<li>nestï¼šæ ¹æ®parent_idç”Ÿæˆæ ‘ç»“æ„ï¼ˆé˜¿é‡Œä¸€é¢çœŸé¢˜ï¼‰</li>
</ol>
<p>æ ¹æ®æ¯é¡¹çš„parent_idï¼Œç”Ÿæˆå…·ä½“æ ‘å½¢ç»“æ„çš„å¯¹è±¡ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> nest = <span class="hljs-function">(<span class="hljs-params">items, id = <span class="hljs-literal">null</span>, link = <span class="hljs-string">'parent_id'</span></span>) =&gt;</span>
  items
    .filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item[link] === id)
    .map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({ ...item, <span class="hljs-attr">children</span>: nest(items, item.id) }));

</code></pre>
<p>ç”¨æ³•ï¼š</p>
<pre><code class="language-js">  <span class="hljs-keyword">const</span> comments = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">parent_id</span>: <span class="hljs-literal">null</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">parent_id</span>: <span class="hljs-number">1</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">parent_id</span>: <span class="hljs-number">1</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">parent_id</span>: <span class="hljs-number">2</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">parent_id</span>: <span class="hljs-number">4</span> }
];
<span class="hljs-keyword">const</span> nestedComments = nest(comments); <span class="hljs-comment">// [{ id: 1, parent_id: null, children: [...] }]</span>

</code></pre>
<h2>å‡½æ•°</h2>
<ol>
<li>attemptï¼šæ•è·å‡½æ•°è¿è¡Œå¼‚å¸¸</li>
</ol>
<p>è¯¥ä»£ç æ®µæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ç»“æœæˆ–æ•è·çš„é”™è¯¯å¯¹è±¡ã€‚</p>
<pre><code class="language-js">onst attempt = <span class="hljs-function">(<span class="hljs-params">fn, ...args</span>) =&gt;</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> fn(...args);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">return</span> e <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span> ? e : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(e);
  }
};
<span class="hljs-keyword">var</span> elements = attempt(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selector</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.querySelectorAll(selector);
}, <span class="hljs-string">'&gt;_&gt;'</span>);
<span class="hljs-keyword">if</span> (elements <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) elements = []; <span class="hljs-comment">// elements = []</span>

</code></pre>
<ol start="2">
<li>deferï¼šæ¨è¿Ÿæ‰§è¡Œ</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> defer = <span class="hljs-function">(<span class="hljs-params">fn, ...args</span>) =&gt;</span> setTimeout(fn, <span class="hljs-number">1</span>, ...args);

defer(<span class="hljs-built_in">console</span>.log, <span class="hljs-string">'a'</span>), <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'b'</span>); <span class="hljs-comment">// logs 'b' then 'a'</span>

</code></pre>
<ol start="3">
<li>runPromisesInSeriesï¼šè¿è¡Œå¤šä¸ªPromises</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> runPromisesInSeries = <span class="hljs-function"><span class="hljs-params">ps</span> =&gt;</span> ps.reduce(<span class="hljs-function">(<span class="hljs-params">p, next</span>) =&gt;</span> p.then(next), <span class="hljs-built_in">Promise</span>.resolve());
<span class="hljs-keyword">const</span> delay = <span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> setTimeout(r, d));

runPromisesInSeries([<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> delay(<span class="hljs-number">1000</span>), () =&gt; delay(<span class="hljs-number">2000</span>)]);
<span class="hljs-comment">//ä¾æ¬¡æ‰§è¡Œæ¯ä¸ªPromises ï¼Œæ€»å…±éœ€è¦3ç§’é’Ÿæ‰èƒ½å®Œæˆ</span>

</code></pre>
<ol start="4">
<li>timeTakenï¼šè®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´</li>
</ol>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> timeTaken = <span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.time(<span class="hljs-string">'timeTaken'</span>);
  <span class="hljs-keyword">const</span> r = callback();
  <span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'timeTaken'</span>);
  <span class="hljs-keyword">return</span> r;
};

timeTaken(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>)); <span class="hljs-comment">// 1024, (logged): timeTaken: 0.02099609375ms</span>

</code></pre>
<ol start="5">
<li>createEventHubï¼šç®€å•çš„å‘å¸ƒ/è®¢é˜…æ¨¡å¼</li>
</ol>
<p>åˆ›å»ºä¸€ä¸ªå‘å¸ƒ/è®¢é˜…ï¼ˆå‘å¸ƒ-è®¢é˜…ï¼‰äº‹ä»¶é›†çº¿ï¼Œæœ‰emitï¼Œonå’Œoffæ–¹æ³•ã€‚</p>
<ul>
<li>ä½¿ç”¨Object.create(null)åˆ›å»ºä¸€ä¸ªç©ºçš„hubå¯¹è±¡ã€‚</li>
<li>emitï¼Œæ ¹æ®eventå‚æ•°è§£æå¤„ç†ç¨‹åºæ•°ç»„ï¼Œç„¶å.forEach()é€šè¿‡ä¼ å…¥æ•°æ®ä½œä¸ºå‚æ•°æ¥è¿è¡Œæ¯ä¸ªå¤„ç†ç¨‹åºã€‚</li>
<li>onï¼Œä¸ºäº‹ä»¶åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼ˆè‹¥ä¸å­˜åœ¨åˆ™ä¸ºç©ºæ•°ç»„ï¼‰ï¼Œç„¶å.push()å°†å¤„ç†ç¨‹åºæ·»åŠ åˆ°è¯¥æ•°ç»„ã€‚</li>
<li>offï¼Œç”¨.findIndex()åœ¨äº‹ä»¶æ•°ç»„ä¸­æŸ¥æ‰¾å¤„ç†ç¨‹åºçš„ç´¢å¼•ï¼Œå¹¶ä½¿ç”¨.splice()åˆ é™¤ã€‚</li>
</ul>
<pre><code class="language-js"><span class="hljs-keyword">const</span> createEventHub = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ({
  <span class="hljs-attr">hub</span>: <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>),
  emit(event, data) {
    (<span class="hljs-keyword">this</span>.hub[event] || []).forEach(<span class="hljs-function"><span class="hljs-params">handler</span> =&gt;</span> handler(data));
  },
  on(event, handler) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.hub[event]) <span class="hljs-keyword">this</span>.hub[event] = [];
    <span class="hljs-keyword">this</span>.hub[event].push(handler);
  },
  off(event, handler) {
    <span class="hljs-keyword">const</span> i = (<span class="hljs-keyword">this</span>.hub[event] || []).findIndex(<span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> h === handler);
    <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">-1</span>) <span class="hljs-keyword">this</span>.hub[event].splice(i, <span class="hljs-number">1</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hub[event].length === <span class="hljs-number">0</span>) <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.hub[event];
  }
});

</code></pre>
<p>ç”¨æ³•ï¼š</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> handler = <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(data);
<span class="hljs-keyword">const</span> hub = createEventHub();
<span class="hljs-keyword">let</span> increment = <span class="hljs-number">0</span>;

<span class="hljs-comment">// è®¢é˜…ï¼Œç›‘å¬ä¸åŒäº‹ä»¶</span>
hub.on(<span class="hljs-string">'message'</span>, handler);
hub.on(<span class="hljs-string">'message'</span>, () =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Message event fired'</span>));
hub.on(<span class="hljs-string">'increment'</span>, () =&gt; increment++);

<span class="hljs-comment">// å‘å¸ƒï¼šå‘å‡ºäº‹ä»¶ä»¥è°ƒç”¨æ‰€æœ‰è®¢é˜…ç»™å®ƒä»¬çš„å¤„ç†ç¨‹åºï¼Œå¹¶å°†æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒä»¬</span>
hub.emit(<span class="hljs-string">'message'</span>, <span class="hljs-string">'hello world'</span>); <span class="hljs-comment">// æ‰“å° 'hello world' å’Œ 'Message event fired'</span>
hub.emit(<span class="hljs-string">'message'</span>, { <span class="hljs-attr">hello</span>: <span class="hljs-string">'world'</span> }); <span class="hljs-comment">// æ‰“å° å¯¹è±¡ å’Œ 'Message event fired'</span>
hub.emit(<span class="hljs-string">'increment'</span>); <span class="hljs-comment">// increment = 1</span>

<span class="hljs-comment">// åœæ­¢è®¢é˜…</span>
hub.off(<span class="hljs-string">'message'</span>, handler);

</code></pre>
<ol start="6">
<li>memoizeï¼šç¼“å­˜å‡½æ•°</li>
</ol>
<p>é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ªMapå¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªç©ºçš„ç¼“å­˜ã€‚</p>
<p>é€šè¿‡æ£€æŸ¥è¾“å…¥å€¼çš„å‡½æ•°è¾“å‡ºæ˜¯å¦å·²ç¼“å­˜ï¼Œè¿”å›å­˜å‚¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œè¯¥å‚æ•°å°†è¢«æä¾›ç»™å·²è®°å¿†çš„å‡½æ•°ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™å­˜å‚¨å¹¶è¿”å›å®ƒã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> memoize = <span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();
  <span class="hljs-keyword">const</span> cached = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">return</span> cache.has(val) ? cache.get(val) : cache.set(val, fn.call(<span class="hljs-keyword">this</span>, val)) &amp;&amp; cache.get(val);
  };
  cached.cache = cache;
  <span class="hljs-keyword">return</span> cached;
};


</code></pre>
<p>Ps: è¿™ä¸ªç‰ˆæœ¬å¯èƒ½ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œè¿˜æœ‰Vueæºç ç‰ˆçš„ï¼š</p>
<pre><code class="language-js"><span class="hljs-comment">/**
 * Create a cached version of a pure function.
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cached</span>&lt;<span class="hljs-title">F</span>: <span class="hljs-title">Function</span>&gt; (<span class="hljs-params">fn: F</span>): <span class="hljs-title">F</span> </span>{
  <span class="hljs-keyword">const</span> cache = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">return</span> (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cachedFn</span> (<span class="hljs-params">str: string</span>) </span>{
    <span class="hljs-keyword">const</span> hit = cache[str]
    <span class="hljs-keyword">return</span> hit || (cache[str] = fn(str))
  }: any)
}

</code></pre>
<ol start="7">
<li>onceï¼šåªè°ƒç”¨ä¸€æ¬¡çš„å‡½æ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> once = <span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> called = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!called) {
      called = <span class="hljs-literal">true</span>
      fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>)
    }
  }
};

</code></pre>
<ol start="8">
<li>flattenObjectï¼šä»¥é”®çš„è·¯å¾„æ‰å¹³åŒ–å¯¹è±¡</li>
</ol>
<p>ä½¿ç”¨é€’å½’ã€‚</p>
<ul>
<li>åˆ©ç”¨Object.keys(obj)è”åˆArray.prototype.reduce()ï¼Œä»¥æ¯ç‰‡å¶å­èŠ‚ç‚¹è½¬æ¢ä¸ºæ‰å¹³çš„è·¯å¾„èŠ‚ç‚¹ã€‚</li>
<li>å¦‚æœé”®çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å‡½æ•°ä½¿ç”¨è°ƒç”¨é€‚å½“çš„è‡ªèº«prefixä»¥åˆ›å»ºè·¯å¾„Object.assign()ã€‚</li>
<li>å¦åˆ™ï¼Œå®ƒå°†é€‚å½“çš„å‰ç¼€é”®å€¼å¯¹æ·»åŠ åˆ°ç´¯åŠ å™¨å¯¹è±¡ã€‚</li>
<li>prefixé™¤éæ‚¨å¸Œæœ›æ¯ä¸ªé”®éƒ½æœ‰ä¸€ä¸ªå‰ç¼€ï¼Œå¦åˆ™åº”å§‹ç»ˆçœç•¥ç¬¬äºŒä¸ªå‚æ•°ã€‚</li>
</ul>
<pre><code class="language-js"><span class="hljs-keyword">const</span> flattenObject = <span class="hljs-function">(<span class="hljs-params">obj, prefix = <span class="hljs-string">''</span></span>) =&gt;</span>
  <span class="hljs-built_in">Object</span>.keys(obj).reduce(<span class="hljs-function">(<span class="hljs-params">acc, k</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> pre = prefix.length ? prefix + <span class="hljs-string">'.'</span> : <span class="hljs-string">''</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj[k] === <span class="hljs-string">'object'</span>) <span class="hljs-built_in">Object</span>.assign(acc, flattenObject(obj[k], pre + k));
    <span class="hljs-keyword">else</span> acc[pre + k] = obj[k];
    <span class="hljs-keyword">return</span> acc;
  }, {});
  
flattenObject({ <span class="hljs-attr">a</span>: { <span class="hljs-attr">b</span>: { <span class="hljs-attr">c</span>: <span class="hljs-number">1</span> } }, <span class="hljs-attr">d</span>: <span class="hljs-number">1</span> }); <span class="hljs-comment">// { 'a.b.c': 1, d: 1 }</span>

</code></pre>
<ol start="9">
<li>unflattenObjectï¼šä»¥é”®çš„è·¯å¾„å±•å¼€å¯¹è±¡</li>
</ol>
<p>ä¸ä¸Šé¢çš„ç›¸åï¼Œå±•å¼€å¯¹è±¡ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> unflattenObject = <span class="hljs-function"><span class="hljs-params">obj</span> =&gt;</span>
  <span class="hljs-built_in">Object</span>.keys(obj).reduce(<span class="hljs-function">(<span class="hljs-params">acc, k</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (k.indexOf(<span class="hljs-string">'.'</span>) !== <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">const</span> keys = k.split(<span class="hljs-string">'.'</span>);
      <span class="hljs-built_in">Object</span>.assign(
        acc,
        <span class="hljs-built_in">JSON</span>.parse(
          <span class="hljs-string">'{'</span> +
            keys.map(<span class="hljs-function">(<span class="hljs-params">v, i</span>) =&gt;</span> (i !== keys.length - <span class="hljs-number">1</span> ? <span class="hljs-string">`"<span class="hljs-subst">${v}</span>":{`</span> : <span class="hljs-string">`"<span class="hljs-subst">${v}</span>":`</span>)).join(<span class="hljs-string">''</span>) +
            obj[k] +
            <span class="hljs-string">'}'</span>.repeat(keys.length)
        )
      );
    } <span class="hljs-keyword">else</span> acc[k] = obj[k];
    <span class="hljs-keyword">return</span> acc;
  }, {});
  
unflattenObject({ <span class="hljs-string">'a.b.c'</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">d</span>: <span class="hljs-number">1</span> }); <span class="hljs-comment">// { a: { b: { c: 1 } }, d: 1 }</span>

</code></pre>
<p>è¿™ä¸ªçš„ç”¨é€”ï¼Œåœ¨åšTreeç»„ä»¶æˆ–å¤æ‚è¡¨å•æ—¶å–å€¼éå¸¸èˆ’æœã€‚</p>
<h2>å­—ç¬¦ä¸²</h2>
<ol>
<li>byteSizeï¼šè¿”å›å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> byteSize = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> <span class="hljs-keyword">new</span> Blob([str]).size;

byteSize(<span class="hljs-string">'ğŸ˜€'</span>); <span class="hljs-comment">// 4</span>
byteSize(<span class="hljs-string">'Hello World'</span>); <span class="hljs-comment">// 11</span>

</code></pre>
<ol start="2">
<li>capitalizeï¼šé¦–å­—æ¯å¤§å†™</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> capitalize = <span class="hljs-function">(<span class="hljs-params">[first, ...rest]</span>) =&gt;</span>
  first.toUpperCase() + rest.join(<span class="hljs-string">''</span>);
  
capitalize(<span class="hljs-string">'fooBar'</span>); <span class="hljs-comment">// 'FooBar'</span>
capitalize(<span class="hljs-string">'fooBar'</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// 'Foobar'</span>

</code></pre>
<ol start="3">
<li>capitalizeEveryWordï¼šæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> capitalizeEveryWord = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.replace(<span class="hljs-regexp">/\b[a-z]/g</span>, char =&gt; char.toUpperCase());

capitalizeEveryWord(<span class="hljs-string">'hello world!'</span>); <span class="hljs-comment">// 'Hello World!'</span>

</code></pre>
<ol start="4">
<li>decapitalizeï¼šé¦–å­—æ¯å°å†™</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> decapitalize = <span class="hljs-function">(<span class="hljs-params">[first, ...rest]</span>) =&gt;</span>
  first.toLowerCase() + rest.join(<span class="hljs-string">''</span>)

decapitalize(<span class="hljs-string">'FooBar'</span>); <span class="hljs-comment">// 'fooBar'</span>
decapitalize(<span class="hljs-string">'FooBar'</span>); <span class="hljs-comment">// 'fooBar'</span>

</code></pre>
<ol start="5">
<li>luhnCheckï¼šé“¶è¡Œå¡å·ç æ ¡éªŒï¼ˆluhnç®—æ³•ï¼‰</li>
</ol>
<p>Luhnç®—æ³•çš„å®ç°ï¼Œç”¨äºéªŒè¯å„ç§æ ‡è¯†å·ï¼Œä¾‹å¦‚ä¿¡ç”¨å¡å·ï¼ŒIMEIå·ï¼Œå›½å®¶æä¾›å•†æ ‡è¯†å·ç­‰ã€‚</p>
<p>ä¸String.prototype.split('')ç»“åˆä½¿ç”¨ï¼Œä»¥è·å–æ•°å­—æ•°ç»„ã€‚è·å¾—æœ€åä¸€ä¸ªæ•°å­—ã€‚å®æ–½luhnç®—æ³•ã€‚å¦‚æœè¢«æ•´é™¤ï¼Œåˆ™è¿”å›ï¼Œå¦åˆ™è¿”å›ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> luhnCheck = <span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> arr = (num + <span class="hljs-string">''</span>)
    .split(<span class="hljs-string">''</span>)
    .reverse()
    .map(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-built_in">parseInt</span>(x));
  <span class="hljs-keyword">let</span> lastDigit = arr.splice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">let</span> sum = arr.reduce(<span class="hljs-function">(<span class="hljs-params">acc, val, i</span>) =&gt;</span> (i % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span> ? acc + val : acc + ((val * <span class="hljs-number">2</span>) % <span class="hljs-number">9</span>) || <span class="hljs-number">9</span>), <span class="hljs-number">0</span>);
  sum += lastDigit;
  <span class="hljs-keyword">return</span> sum % <span class="hljs-number">10</span> === <span class="hljs-number">0</span>;
};

</code></pre>
<p>ç”¨ä¾‹:</p>
<pre><code class="language-js">luhnCheck(<span class="hljs-string">'4485275742308327'</span>); <span class="hljs-comment">// true</span>
luhnCheck(<span class="hljs-number">6011329933655299</span>); <span class="hljs-comment">//  false</span>
luhnCheck(<span class="hljs-number">123456789</span>); <span class="hljs-comment">// false</span>
</code></pre>
<p>è¡¥å……ï¼šé“¶è¡Œå¡å·ç çš„æ ¡éªŒè§„åˆ™ï¼š</p>
<p>é“¶è¡Œå¡å·ç çš„æ ¡éªŒé‡‡ç”¨Luhnç®—æ³•ï¼Œæ ¡éªŒè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»å³åˆ°å·¦ç»™å¡å·å­—ç¬¦ä¸²ç¼–å·ï¼Œæœ€å³è¾¹ç¬¬ä¸€ä½æ˜¯1ï¼Œæœ€å³è¾¹ç¬¬äºŒä½æ˜¯2ï¼Œæœ€å³è¾¹ç¬¬ä¸‰ä½æ˜¯3â€¦.</li>
<li>ä»å³å‘å·¦éå†ï¼Œå¯¹æ¯ä¸€ä½å­—ç¬¦tæ‰§è¡Œç¬¬ä¸‰ä¸ªæ­¥éª¤ï¼Œå¹¶å°†æ¯ä¸€ä½çš„è®¡ç®—ç»“æœç›¸åŠ å¾—åˆ°ä¸€ä¸ªæ•°sã€‚</li>
<li>å¯¹æ¯ä¸€ä½çš„è®¡ç®—è§„åˆ™ï¼šå¦‚æœè¿™ä¸€ä½æ˜¯å¥‡æ•°ä½ï¼Œåˆ™è¿”å›tæœ¬èº«ï¼Œå¦‚æœæ˜¯å¶æ•°ä½ï¼Œåˆ™å…ˆå°†tä¹˜ä»¥2å¾—åˆ°ä¸€ä¸ªæ•°nï¼Œå¦‚æœnæ˜¯ä¸€ä½æ•°ï¼ˆå°äº10ï¼‰ï¼Œç›´æ¥è¿”å›nï¼Œå¦åˆ™å°†nçš„ä¸ªä½æ•°å’Œåä½æ•°ç›¸åŠ è¿”å›ã€‚</li>
<li>å¦‚æœsèƒ½å¤Ÿæ•´é™¤10ï¼Œåˆ™æ­¤å·ç æœ‰æ•ˆï¼Œå¦åˆ™å·ç æ— æ•ˆã€‚</li>
</ul>
<p>å› ä¸ºæœ€ç»ˆçš„ç»“æœä¼šå¯¹10å–ä½™æ¥åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿæ•´é™¤10ï¼Œæ‰€ä»¥åˆå«åšæ¨¡10ç®—æ³•ã€‚
å½“ç„¶ï¼Œè¿˜æ˜¯åº“æ¯”è¾ƒé¦™: bankcardinfo</p>
<ol start="6">
<li>splitLinesï¼šå°†å¤šè¡Œå­—ç¬¦ä¸²æ‹†åˆ†ä¸ºè¡Œæ•°ç»„ã€‚</li>
</ol>
<p>ä½¿ç”¨String.prototype.split()å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¢è¡Œç¬¦å¹¶åˆ›å»ºä¸€ä¸ªæ•°ç»„ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> splitLines = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.split(<span class="hljs-regexp">/\r?\n/</span>);

splitLines(<span class="hljs-string">'This\nis a\nmultiline\nstring.\n'</span>); <span class="hljs-comment">// ['This', 'is a', 'multiline', 'string.' , '']</span>

</code></pre>
<ol start="7">
<li>stripHTMLTagsï¼šåˆ é™¤å­—ç¬¦ä¸²ä¸­çš„HTMlæ ‡ç­¾</li>
</ol>
<p>ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤HTML / XMLæ ‡ç­¾ã€‚</p>
<p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤HTML / XML æ ‡è®°ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> stripHTMLTags = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.replace(<span class="hljs-regexp">/&lt;[^&gt;]*&gt;/g</span>, <span class="hljs-string">''</span>);

stripHTMLTags(<span class="hljs-string">'&lt;p&gt;&lt;em&gt;lorem&lt;/em&gt; &lt;strong&gt;ipsum&lt;/strong&gt;&lt;/p&gt;'</span>); <span class="hljs-comment">// 'lorem ipsum'</span>

</code></pre>
<h2>å¯¹è±¡</h2>
<ol>
<li>dayOfYearï¼šå½“å‰æ—¥æœŸå¤©æ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> dayOfYear = <span class="hljs-function"><span class="hljs-params">date</span> =&gt;</span>
  <span class="hljs-built_in">Math</span>.floor((date - <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(date.getFullYear(), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)) / <span class="hljs-number">1000</span> / <span class="hljs-number">60</span> / <span class="hljs-number">60</span> / <span class="hljs-number">24</span>);

dayOfYear(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()); <span class="hljs-comment">// 285</span>

</code></pre>
<ol start="2">
<li>forOwnï¼šè¿­ä»£å±æ€§å¹¶æ‰§è¡Œå›è°ƒ</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> forOwn = <span class="hljs-function">(<span class="hljs-params">obj, fn</span>) =&gt;</span> <span class="hljs-built_in">Object</span>.keys(obj).forEach(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> fn(obj[key], key, obj));
forOwn({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>, <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> }, v =&gt; <span class="hljs-built_in">console</span>.log(v)); <span class="hljs-comment">// 'bar', 1</span>

</code></pre>
<ol start="3">
<li>Get Time From Dateï¼šè¿”å›å½“å‰24å°æ—¶åˆ¶æ—¶é—´çš„å­—ç¬¦ä¸²</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> getColonTimeFromDate = <span class="hljs-function"><span class="hljs-params">date</span> =&gt;</span> date.toTimeString().slice(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>);

getColonTimeFromDate(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()); <span class="hljs-comment">// "08:38:00"</span>

</code></pre>
<ol start="4">
<li>Get Days Between Datesï¼šè¿”å›æ—¥æœŸé—´çš„å¤©æ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> getDaysDiffBetweenDates = <span class="hljs-function">(<span class="hljs-params">dateInitial, dateFinal</span>) =&gt;</span>
  (dateFinal - dateInitial) / (<span class="hljs-number">1000</span> * <span class="hljs-number">3600</span> * <span class="hljs-number">24</span>);
  
getDaysDiffBetweenDates(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">'2019-01-01'</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">'2019-10-14'</span>)); <span class="hljs-comment">// 286</span>

</code></pre>
<ol start="5">
<li>isï¼šæ£€æŸ¥å€¼æ˜¯å¦ä¸ºç‰¹å®šç±»å‹ã€‚</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> is = <span class="hljs-function">(<span class="hljs-params">type, val</span>) =&gt;</span> ![, <span class="hljs-literal">null</span>].includes(val) &amp;&amp; val.constructor === type;

is(<span class="hljs-built_in">Array</span>, [<span class="hljs-number">1</span>]); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">ArrayBuffer</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>()); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">Map</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">RegExp</span>, /./g); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">Set</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">WeakMap</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>()); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">WeakSet</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakSet</span>()); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">String</span>, <span class="hljs-string">''</span>); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">String</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">''</span>)); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">Number</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">Number</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Number</span>(<span class="hljs-number">1</span>)); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">Boolean</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// true</span>
is(<span class="hljs-built_in">Boolean</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Boolean</span>(<span class="hljs-literal">true</span>)); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="6">
<li>isAfterDateï¼šæ£€æŸ¥æ˜¯å¦åœ¨æŸæ—¥æœŸå</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> isAfterDate = <span class="hljs-function">(<span class="hljs-params">dateA, dateB</span>) =&gt;</span> dateA &gt; dateB;

isAfterDate(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2010</span>, <span class="hljs-number">10</span>, <span class="hljs-number">21</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2010</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>)); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="7">
<li>isBeforeDateï¼šæ£€æŸ¥æ˜¯å¦åœ¨æŸæ—¥æœŸå‰</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> isBeforeDate = <span class="hljs-function">(<span class="hljs-params">dateA, dateB</span>) =&gt;</span> dateA &lt; dateB;

isBeforeDate(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2010</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2010</span>, <span class="hljs-number">10</span>, <span class="hljs-number">21</span>)); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="8">
<li>tomorrowï¼šè·å–æ˜å¤©çš„å­—ç¬¦ä¸²æ ¼å¼æ—¶é—´</li>
</ol>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> tomorrow = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> t = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
  t.setDate(t.getDate() + <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> t.toISOString().split(<span class="hljs-string">'T'</span>)[<span class="hljs-number">0</span>];
};

tomorrow(); <span class="hljs-comment">// 2019-10-15 (å¦‚æœæ˜å¤©æ˜¯2019-10-15)</span>

</code></pre>
<ol start="9">
<li>equalsï¼šå…¨ç­‰åˆ¤æ–­</li>
</ol>
<p>åœ¨ä¸¤ä¸ªå˜é‡ä¹‹é—´è¿›è¡Œæ·±åº¦æ¯”è¾ƒä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦å…¨ç­‰ã€‚</p>
<p>æ­¤ä»£ç æ®µç²¾ç®€çš„æ ¸å¿ƒåœ¨äºArray.prototype.every()çš„ä½¿ç”¨ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> equals = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (a === b) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">if</span> (a <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span> &amp;&amp; b <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) <span class="hljs-keyword">return</span> a.getTime() === b.getTime();
  <span class="hljs-keyword">if</span> (!a || !b || (<span class="hljs-keyword">typeof</span> a !== <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> b !== <span class="hljs-string">'object'</span>)) <span class="hljs-keyword">return</span> a === b;
  <span class="hljs-keyword">if</span> (a.prototype !== b.prototype) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">let</span> keys = <span class="hljs-built_in">Object</span>.keys(a);
  <span class="hljs-keyword">if</span> (keys.length !== <span class="hljs-built_in">Object</span>.keys(b).length) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">return</span> keys.every(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> equals(a[k], b[k]));
};

</code></pre>
<p>ç”¨æ³•ï¼š</p>
<pre><code class="language-js">equals({ <span class="hljs-attr">a</span>: [<span class="hljs-number">2</span>, { <span class="hljs-attr">e</span>: <span class="hljs-number">3</span> }], <span class="hljs-attr">b</span>: [<span class="hljs-number">4</span>], <span class="hljs-attr">c</span>: <span class="hljs-string">'foo'</span> }, { <span class="hljs-attr">a</span>: [<span class="hljs-number">2</span>, { <span class="hljs-attr">e</span>: <span class="hljs-number">3</span> }], <span class="hljs-attr">b</span>: [<span class="hljs-number">4</span>], <span class="hljs-attr">c</span>: <span class="hljs-string">'foo'</span> }); <span class="hljs-comment">// true</span>

</code></pre>
<h2>æ•°å­—</h2>
<ol>
<li>randomIntegerInRangeï¼šç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºæ•´æ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> randomIntegerInRange = <span class="hljs-function">(<span class="hljs-params">min, max</span>) =&gt;</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (max - min + <span class="hljs-number">1</span>)) + min;

randomIntegerInRange(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// 3</span>

</code></pre>
<ol start="2">
<li>randomNumberInRangeï¼šç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºå°æ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> randomNumberInRange = <span class="hljs-function">(<span class="hljs-params">min, max</span>) =&gt;</span> <span class="hljs-built_in">Math</span>.random() * (max - min) + min;

randomNumberInRange(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>); <span class="hljs-comment">// 6.0211363285087005</span>

</code></pre>
<ol start="3">
<li>roundï¼šå››èˆäº”å…¥åˆ°æŒ‡å®šä½æ•°</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> round = <span class="hljs-function">(<span class="hljs-params">n, decimals = <span class="hljs-number">0</span></span>) =&gt;</span> <span class="hljs-built_in">Number</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(<span class="hljs-string">`<span class="hljs-subst">${n}</span>e<span class="hljs-subst">${decimals}</span>`</span>)}</span>e-<span class="hljs-subst">${decimals}</span>`</span>);

round(<span class="hljs-number">1.005</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// 1.01</span>

</code></pre>
<ol start="4">
<li>sumï¼šè®¡ç®—æ•°ç»„æˆ–å¤šä¸ªæ•°å­—çš„æ€»å’Œ</li>
</ol>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> sum = <span class="hljs-function">(<span class="hljs-params">...arr</span>) =&gt;</span> [...arr].reduce(<span class="hljs-function">(<span class="hljs-params">acc, val</span>) =&gt;</span> acc + val, <span class="hljs-number">0</span>);

sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// 10</span>
sum(...[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]); <span class="hljs-comment">// 10</span>

</code></pre>
<ol start="5">
<li>toCurrencyï¼šç®€å•çš„è´§å¸å•ä½è½¬æ¢</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> toCurrency = <span class="hljs-function">(<span class="hljs-params">n, curr, LanguageFormat = <span class="hljs-literal">undefined</span></span>) =&gt;</span>
  <span class="hljs-built_in">Intl</span>.NumberFormat(LanguageFormat, { <span class="hljs-attr">style</span>: <span class="hljs-string">'currency'</span>, <span class="hljs-attr">currency</span>: curr }).format(n);
  
toCurrency(<span class="hljs-number">123456.789</span>, <span class="hljs-string">'EUR'</span>); <span class="hljs-comment">// â‚¬123,456.79</span>
toCurrency(<span class="hljs-number">123456.789</span>, <span class="hljs-string">'USD'</span>, <span class="hljs-string">'en-us'</span>); <span class="hljs-comment">// $123,456.79  </span>
toCurrency(<span class="hljs-number">123456.789</span>, <span class="hljs-string">'USD'</span>, <span class="hljs-string">'fa'</span>); <span class="hljs-comment">// Û±Û²Û³Ù¬Û´ÛµÛ¶Ù«Û·Û¹</span>
toCurrency(<span class="hljs-number">322342436423.2435</span>, <span class="hljs-string">'JPY'</span>); <span class="hljs-comment">// Â¥322,342,436,423 </span>

</code></pre>
<h2>æµè§ˆå™¨æ“ä½œåŠå…¶å®ƒ</h2>
<ol>
<li>bottomVisibleï¼šæ£€æŸ¥é¡µé¢åº•éƒ¨æ˜¯å¦å¯è§</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> bottomVisible = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span>
  <span class="hljs-built_in">document</span>.documentElement.clientHeight + <span class="hljs-built_in">window</span>.scrollY &gt;=
  (<span class="hljs-built_in">document</span>.documentElement.scrollHeight || <span class="hljs-built_in">document</span>.documentElement.clientHeight);

bottomVisible(); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="2">
<li>Create Directoryï¼šæ£€æŸ¥åˆ›å»ºç›®å½•</li>
</ol>
<p>æ­¤ä»£ç æ®µè°ƒç”¨fsæ¨¡å—çš„existsSync()æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™mkdirSync()åˆ›å»ºè¯¥ç›®å½•ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> createDirIfNotExists = <span class="hljs-function"><span class="hljs-params">dir</span> =&gt;</span> (!fs.existsSync(dir) ? fs.mkdirSync(dir) : <span class="hljs-literal">undefined</span>);
createDirIfNotExists(<span class="hljs-string">'test'</span>); 

</code></pre>
<ol start="3">
<li>currentURLï¼šè¿”å›å½“å‰é“¾æ¥url</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> currentURL = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">window</span>.location.href;

currentURL(); <span class="hljs-comment">// 'https://juejin.im'</span>

</code></pre>
<ol start="4">
<li>distanceï¼šè¿”å›ä¸¤ç‚¹é—´çš„è·ç¦»</li>
</ol>
<p>è¯¥ä»£ç æ®µé€šè¿‡è®¡ç®—æ¬§å‡ é‡Œå¾—è·ç¦»æ¥è¿”å›ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> distance = <span class="hljs-function">(<span class="hljs-params">x0, y0, x1, y1</span>) =&gt;</span> <span class="hljs-built_in">Math</span>.hypot(x1 - x0, y1 - y0);

distance(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// 2.23606797749979</span>

</code></pre>
<ol start="5">
<li>elementContainsï¼šæ£€æŸ¥æ˜¯å¦åŒ…å«å­å…ƒç´ 
æ­¤ä»£ç æ®µæ£€æŸ¥çˆ¶å…ƒç´ æ˜¯å¦åŒ…å«å­å…ƒç´ ã€‚</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> elementContains = <span class="hljs-function">(<span class="hljs-params">parent, child</span>) =&gt;</span> parent !== child &amp;&amp; parent.contains(child);

elementContains(<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'head'</span>), <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'title'</span>)); <span class="hljs-comment">// true</span>
elementContains(<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'body'</span>), <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'body'</span>)); <span class="hljs-comment">// false</span>

</code></pre>
<ol start="6">
<li>getStyleï¼šè¿”å›æŒ‡å®šå…ƒç´ çš„ç”Ÿæ•ˆæ ·å¼</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> getStyle = <span class="hljs-function">(<span class="hljs-params">el, ruleName</span>) =&gt;</span> getComputedStyle(el)[ruleName];

getStyle(<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'p'</span>), <span class="hljs-string">'font-size'</span>); <span class="hljs-comment">// '16px'</span>

</code></pre>
<ol start="7">
<li>getTypeï¼šè¿”å›å€¼æˆ–å˜é‡çš„ç±»å‹å</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> getType = <span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span>
  v === <span class="hljs-literal">undefined</span> ? <span class="hljs-string">'undefined'</span> : v === <span class="hljs-literal">null</span> ? <span class="hljs-string">'null'</span> : v.constructor.name.toLowerCase();
  
getType(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])); <span class="hljs-comment">// 'set'</span>
getType([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// 'array'</span>

</code></pre>
<ol start="8">
<li>hasClassï¼šæ ¡éªŒæŒ‡å®šå…ƒç´ çš„ç±»å</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> hasClass = <span class="hljs-function">(<span class="hljs-params">el, className</span>) =&gt;</span> el.classList.contains(className);
hasClass(<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'p.special'</span>), <span class="hljs-string">'special'</span>); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="9">
<li>hideï¼šéšè—æ‰€æœ‰çš„æŒ‡å®šæ ‡ç­¾</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> hide = <span class="hljs-function">(<span class="hljs-params">...el</span>) =&gt;</span> [...el].forEach(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> (e.style.display = <span class="hljs-string">'none'</span>));

hide(<span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'img'</span>)); <span class="hljs-comment">// éšè—æ‰€æœ‰&lt;img&gt;æ ‡ç­¾</span>

</code></pre>
<ol start="10">
<li>httpsRedirectï¼šHTTP è·³è½¬ HTTPS</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> httpsRedirect = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (location.protocol !== <span class="hljs-string">'https:'</span>) location.replace(<span class="hljs-string">'https://'</span> + location.href.split(<span class="hljs-string">'//'</span>)[<span class="hljs-number">1</span>]);
};

httpsRedirect(); <span class="hljs-comment">// è‹¥åœ¨`http://www.baidu.com`, åˆ™è·³è½¬åˆ°`https://www.baidu.com`</span>

</code></pre>
<ol start="11">
<li>insertAfterï¼šåœ¨æŒ‡å®šå…ƒç´ ä¹‹åæ’å…¥æ–°å…ƒç´ </li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> insertAfter = <span class="hljs-function">(<span class="hljs-params">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class="hljs-string">'afterend'</span>, htmlString);

<span class="hljs-comment">// &lt;div id="myId"&gt;...&lt;/div&gt; &lt;p&gt;after&lt;/p&gt;</span>
insertAfter(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'myId'</span>), <span class="hljs-string">'&lt;p&gt;after&lt;/p&gt;'</span>); 

</code></pre>
<ol start="12">
<li>insertBeforeï¼šåœ¨æŒ‡å®šå…ƒç´ ä¹‹å‰æ’å…¥æ–°å…ƒç´ </li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> insertBefore = <span class="hljs-function">(<span class="hljs-params">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class="hljs-string">'beforebegin'</span>, htmlString);

insertBefore(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'myId'</span>), <span class="hljs-string">'&lt;p&gt;before&lt;/p&gt;'</span>); <span class="hljs-comment">// &lt;p&gt;before&lt;/p&gt; &lt;div id="myId"&gt;...&lt;/div&gt;</span>

</code></pre>
<ol start="13">
<li>isBrowserï¼šæ£€æŸ¥æ˜¯å¦ä¸ºæµè§ˆå™¨ç¯å¢ƒ</li>
</ol>
<p>æ­¤ä»£ç æ®µå¯ç”¨äºç¡®å®šå½“å‰è¿è¡Œæ—¶ç¯å¢ƒæ˜¯å¦ä¸ºæµè§ˆå™¨ã€‚è¿™æœ‰åŠ©äºé¿å…åœ¨æœåŠ¡å™¨ï¼ˆèŠ‚ç‚¹ï¼‰ä¸Šè¿è¡Œå‰ç«¯æ¨¡å—æ—¶å‡ºé”™ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> isBrowser = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> ![<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span>, <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">document</span>].includes(<span class="hljs-string">'undefined'</span>);

isBrowser(); <span class="hljs-comment">// true (browser)</span>
isBrowser(); <span class="hljs-comment">// false (Node)</span>

</code></pre>
<ol start="14">
<li>isBrowserTabï¼šæ£€æŸ¥å½“å‰æ ‡ç­¾é¡µæ˜¯å¦æ´»åŠ¨</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> isBrowserTabFocused = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> !<span class="hljs-built_in">document</span>.hidden;

isBrowserTabFocused(); <span class="hljs-comment">// true</span>

</code></pre>
<ol start="15">
<li>nodeListToArrayï¼šè½¬æ¢nodeListä¸ºæ•°ç»„</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> nodeListToArray = <span class="hljs-function"><span class="hljs-params">nodeList</span> =&gt;</span> [...nodeList];

nodeListToArray(<span class="hljs-built_in">document</span>.childNodes); <span class="hljs-comment">// [ &lt;!DOCTYPE html&gt;, html ]</span>

</code></pre>
<ol start="16">
<li>Random Hexadecimal Color Codeï¼šéšæœºåå…­è¿›åˆ¶é¢œè‰²</li>
</ol>
<pre><code class="language-js">
<span class="hljs-keyword">const</span> randomHexColorCode = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> n = (<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">0xfffff</span> * <span class="hljs-number">1000000</span>).toString(<span class="hljs-number">16</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">'#'</span> + n.slice(<span class="hljs-number">0</span>, <span class="hljs-number">6</span>);
};

randomHexColorCode(); <span class="hljs-comment">// "#e34155"</span>

</code></pre>
<ol start="17">
<li>scrollToTopï¼šå¹³æ»‘æ»šåŠ¨è‡³é¡¶éƒ¨</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> scrollToTop = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> c = <span class="hljs-built_in">document</span>.documentElement.scrollTop || <span class="hljs-built_in">document</span>.body.scrollTop;
  <span class="hljs-keyword">if</span> (c &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">window</span>.requestAnimationFrame(scrollToTop);
    <span class="hljs-built_in">window</span>.scrollTo(<span class="hljs-number">0</span>, c - c / <span class="hljs-number">8</span>);
  }
};

scrollToTop();

</code></pre>
<ol start="18">
<li>smoothScrollï¼šæ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ åŒºåŸŸ</li>
</ol>
<p>è¯¥ä»£ç æ®µå¯å°†æŒ‡å®šå…ƒç´ å¹³æ»‘æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> smoothScroll = <span class="hljs-function"><span class="hljs-params">element</span> =&gt;</span>
  <span class="hljs-built_in">document</span>.querySelector(element).scrollIntoView({
    <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>
  });
  
smoothScroll(<span class="hljs-string">'#fooBar'</span>); 
smoothScroll(<span class="hljs-string">'.fooBar'</span>); 

</code></pre>
<ol start="19">
<li>detectDeviceTypeï¼šæ£€æµ‹ç§»åŠ¨/PCè®¾å¤‡</li>
</ol>
<pre><code class="language-js"><span class="hljs-keyword">const</span> detectDeviceType = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span>
  <span class="hljs-regexp">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i</span>.test(navigator.userAgent)
    ? <span class="hljs-string">'Mobile'</span>
    : <span class="hljs-string">'Desktop'</span>;

</code></pre>
<ol start="20">
<li>getScrollPositionï¼šè¿”å›å½“å‰çš„æ»šåŠ¨ä½ç½®</li>
</ol>
<p>é»˜è®¤å‚æ•°ä¸ºwindow ï¼ŒpageXOffset(pageYOffset)ä¸ºç¬¬ä¸€é€‰æ‹©ï¼Œæ²¡æœ‰åˆ™ç”¨scrollLeft(scrollTop)</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> getScrollPosition = <span class="hljs-function">(<span class="hljs-params">el = <span class="hljs-built_in">window</span></span>) =&gt;</span> ({
  <span class="hljs-attr">x</span>: el.pageXOffset !== <span class="hljs-literal">undefined</span> ? el.pageXOffset : el.scrollLeft,
  <span class="hljs-attr">y</span>: el.pageYOffset !== <span class="hljs-literal">undefined</span> ? el.pageYOffset : el.scrollTop
});

getScrollPosition(); <span class="hljs-comment">// {x: 0, y: 200}</span>

</code></pre>
<ol start="21">
<li>sizeï¼šè·å–ä¸åŒç±»å‹å˜é‡çš„å­—èŠ‚é•¿åº¦</li>
</ol>
<p>è¿™ä¸ªçš„å®ç°éå¸¸å·§å¦™ï¼Œåˆ©ç”¨Blobç±»æ–‡ä»¶å¯¹è±¡çš„ç‰¹æ€§ï¼Œè·å–å¯¹è±¡çš„é•¿åº¦ã€‚</p>
<p>å¦å¤–ï¼Œå¤šé‡ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œæ˜¯çœŸé¦™ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> size = <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span>
  <span class="hljs-built_in">Array</span>.isArray(val)
    ? val.length
    : val &amp;&amp; <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'object'</span>
    ? val.size || val.length || <span class="hljs-built_in">Object</span>.keys(val).length
    : <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'string'</span>
    ? <span class="hljs-keyword">new</span> Blob([val]).size
    : <span class="hljs-number">0</span>;

size([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]); <span class="hljs-comment">// 5</span>
size(<span class="hljs-string">'size'</span>); <span class="hljs-comment">// 4</span>
size({ <span class="hljs-attr">one</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">two</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">three</span>: <span class="hljs-number">3</span> }); <span class="hljs-comment">// 3</span>


</code></pre>
<ol start="22">
<li>escapeHTMLï¼šè½¬ä¹‰HTML</li>
</ol>
<p>å½“ç„¶æ˜¯ç”¨æ¥é˜²XSSæ”»å‡»å•¦ã€‚</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> escapeHTML = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span>
  str.replace(
    <span class="hljs-regexp">/[&amp;&lt;&gt;'"]/g</span>,
    tag =&gt;
      ({
        <span class="hljs-string">'&amp;'</span>: <span class="hljs-string">'&amp;amp;'</span>,
        <span class="hljs-string">'&lt;'</span>: <span class="hljs-string">'&amp;lt;'</span>,
        <span class="hljs-string">'&gt;'</span>: <span class="hljs-string">'&amp;gt;'</span>,
        <span class="hljs-string">"'"</span>: <span class="hljs-string">'&amp;#39;'</span>,
        <span class="hljs-string">'"'</span>: <span class="hljs-string">'&amp;quot;'</span>
      }[tag] || tag)
  );

escapeHTML(<span class="hljs-string">'&lt;a href="#"&gt;Me &amp; you&lt;/a&gt;'</span>); <span class="hljs-comment">// '&amp;lt;a href=&amp;quot;#&amp;quot;&amp;gt;Me &amp;amp; you&amp;lt;/a&amp;gt;'</span>

</code></pre>
</section><footer class="footer-container"><div class="footer-body"><img src="/img/dubbo_gray.png"/><div class="cols-container"><div class="col col-12"><h3>Disclaimer</h3><p>the disclaimer content</p></div><div class="col col-6"><dl><dt>Documentation</dt><dd><a href="/en-us/docs/introduction.html" target="_self">Overview</a></dd><dd><a href="/en-us/docs/introduction.html" target="_self">Quick start</a></dd><dd><a href="/en-us/docs/dir/introduction.html" target="_self">Developer guide</a></dd></dl></div><div class="col col-6"><dl><dt>Resources</dt><dd><a href="/en-us/blog/index.html" target="_self">Blog</a></dd><dd><a href="/en-us/community/index.html" target="_self">Community</a></dd></dl></div></div><div class="copyright"><span>Copyright Â© 2019 BurningMyself</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/blogDetail.js"></script>
</body>
</html>