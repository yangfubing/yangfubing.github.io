{
  "filename": "js_tool_method.md",
  "__html": "<h1>JavaScript å·¥å…·å‡½æ•°å¤§å…¨</h1>\n<h2>æ•°ç»„</h2>\n<ol>\n<li>allï¼šå¸ƒå°”å…¨ç­‰åˆ¤æ–­</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> all = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, fn = <span class=\"hljs-built_in\">Boolean</span></span>) =&gt;</span> arr.every(fn);\n\nall([<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], x =&gt; x &gt; <span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// true</span>\nall([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"2\">\n<li>allEqualï¼šæ£€æŸ¥æ•°ç»„å„é¡¹ç›¸ç­‰</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> allEqual = <span class=\"hljs-function\"><span class=\"hljs-params\">arr</span> =&gt;</span> arr.every(<span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> val === arr[<span class=\"hljs-number\">0</span>]);\n\nallEqual([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>]); <span class=\"hljs-comment\">// false</span>\nallEqual([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>]); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"3\">\n<li>approximatelyEqualï¼šçº¦ç­‰äº</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> approximatelyEqual = <span class=\"hljs-function\">(<span class=\"hljs-params\">v1, v2, epsilon = <span class=\"hljs-number\">0.001</span></span>) =&gt;</span> <span class=\"hljs-built_in\">Math</span>.abs(v1 - v2) &lt; epsilon;\n\napproximatelyEqual(<span class=\"hljs-built_in\">Math</span>.PI / <span class=\"hljs-number\">2.0</span>, <span class=\"hljs-number\">1.5708</span>); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"4\">\n<li>arrayToCSVï¼šæ•°ç»„è½¬CSVæ ¼å¼ï¼ˆå¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼‰</li>\n</ol>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> arrayToCSV = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, delimiter = <span class=\"hljs-string\">','</span></span>) =&gt;</span>\n  arr.map(<span class=\"hljs-function\"><span class=\"hljs-params\">v</span> =&gt;</span> v.map(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> <span class=\"hljs-string\">`\"<span class=\"hljs-subst\">${x}</span>\"`</span>).join(delimiter)).join(<span class=\"hljs-string\">'\\n'</span>);\n  \narrayToCSV([[<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'b'</span>], [<span class=\"hljs-string\">'c'</span>, <span class=\"hljs-string\">'d'</span>]]); <span class=\"hljs-comment\">// '\"a\",\"b\"\\n\"c\",\"d\"'</span>\narrayToCSV([[<span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'b'</span>], [<span class=\"hljs-string\">'c'</span>, <span class=\"hljs-string\">'d'</span>]], <span class=\"hljs-string\">';'</span>); <span class=\"hljs-comment\">// '\"a\";\"b\"\\n\"c\";\"d\"'</span>\n\n</code></pre>\n<ol start=\"5\">\n<li>arrayToHtmlListï¼šæ•°ç»„è½¬liåˆ—è¡¨</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> arrayToHtmlList = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, listID</span>) =&gt;</span>\n  (<span class=\"hljs-function\"><span class=\"hljs-params\">el</span> =&gt;</span> (\n    (el = <span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'#'</span> + listID)),\n    (el.innerHTML += arr.map(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> <span class=\"hljs-string\">`&lt;li&gt;<span class=\"hljs-subst\">${item}</span>&lt;/li&gt;`</span>).join(<span class=\"hljs-string\">''</span>))\n  ))();\n  \narrayToHtmlList([<span class=\"hljs-string\">'item 1'</span>, <span class=\"hljs-string\">'item 2'</span>], <span class=\"hljs-string\">'myListID'</span>);\n\n</code></pre>\n<ol start=\"6\">\n<li>averageï¼šå¹³å‡æ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> average = <span class=\"hljs-function\">(<span class=\"hljs-params\">...nums</span>) =&gt;</span> nums.reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, val</span>) =&gt;</span> acc + val, <span class=\"hljs-number\">0</span>) / nums.length;\naverage(...[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]); <span class=\"hljs-comment\">// 2</span>\naverage(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>); <span class=\"hljs-comment\">// 2</span>\n\n</code></pre>\n<ol start=\"7\">\n<li>averageByï¼šæ•°ç»„å¯¹è±¡å±æ€§å¹³å‡æ•°</li>\n</ol>\n<p>æ­¤ä»£ç æ®µå°†è·å–æ•°ç»„å¯¹è±¡å±æ€§çš„å¹³å‡å€¼</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> averageBy = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, fn</span>) =&gt;</span>\n  arr.map(<span class=\"hljs-keyword\">typeof</span> fn === <span class=\"hljs-string\">'function'</span> ? fn : <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> val[fn]).reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, val</span>) =&gt;</span> acc + val, <span class=\"hljs-number\">0</span>) /\n  arr.length;\n  \naverageBy([{ <span class=\"hljs-attr\">n</span>: <span class=\"hljs-number\">4</span> }, { <span class=\"hljs-attr\">n</span>: <span class=\"hljs-number\">2</span> }, { <span class=\"hljs-attr\">n</span>: <span class=\"hljs-number\">8</span> }, { <span class=\"hljs-attr\">n</span>: <span class=\"hljs-number\">6</span> }], o =&gt; o.n); <span class=\"hljs-comment\">// 5</span>\naverageBy([{ <span class=\"hljs-attr\">n</span>: <span class=\"hljs-number\">4</span> }, { <span class=\"hljs-attr\">n</span>: <span class=\"hljs-number\">2</span> }, { <span class=\"hljs-attr\">n</span>: <span class=\"hljs-number\">8</span> }, { <span class=\"hljs-attr\">n</span>: <span class=\"hljs-number\">6</span> }], <span class=\"hljs-string\">'n'</span>); <span class=\"hljs-comment\">// 5</span>\n\n</code></pre>\n<ol start=\"8\">\n<li>bifurcateï¼šæ‹†åˆ†æ–­è¨€åçš„æ•°ç»„</li>\n</ol>\n<p>å¯ä»¥æ ¹æ®æ¯ä¸ªå…ƒç´ è¿”å›çš„å€¼ï¼Œä½¿ç”¨reduce()å’Œpush() å°†å…ƒç´ æ·»åŠ åˆ°ç¬¬äºŒæ¬¡å‚æ•°fnä¸­ ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> bifurcate = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, filter</span>) =&gt;</span>\n  arr.reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, val, i</span>) =&gt;</span> (acc[filter[i] ? <span class=\"hljs-number\">0</span> : <span class=\"hljs-number\">1</span>].push(val), acc), [[], []]);\nbifurcate([<span class=\"hljs-string\">'beep'</span>, <span class=\"hljs-string\">'boop'</span>, <span class=\"hljs-string\">'foo'</span>, <span class=\"hljs-string\">'bar'</span>], [<span class=\"hljs-literal\">true</span>, <span class=\"hljs-literal\">true</span>, <span class=\"hljs-literal\">false</span>, <span class=\"hljs-literal\">true</span>]); \n<span class=\"hljs-comment\">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span>\n\n</code></pre>\n<ol start=\"9\">\n<li>castArrayï¼šå…¶å®ƒç±»å‹è½¬æ•°ç»„</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> castArray = <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span> (<span class=\"hljs-built_in\">Array</span>.isArray(val) ? val : [val]);\n\ncastArray(<span class=\"hljs-string\">'foo'</span>); <span class=\"hljs-comment\">// ['foo']</span>\ncastArray([<span class=\"hljs-number\">1</span>]); <span class=\"hljs-comment\">// [1]</span>\ncastArray(<span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// [1]</span>\n\n</code></pre>\n<ol start=\"10\">\n<li>compactï¼šå»é™¤æ•°ç»„ä¸­çš„æ— æ•ˆ/æ— ç”¨å€¼</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> compact = <span class=\"hljs-function\"><span class=\"hljs-params\">arr</span> =&gt;</span> arr.filter(<span class=\"hljs-built_in\">Boolean</span>);\n\ncompact([<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-literal\">false</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">''</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">'a'</span>, <span class=\"hljs-string\">'e'</span> * <span class=\"hljs-number\">23</span>, <span class=\"hljs-literal\">NaN</span>, <span class=\"hljs-string\">'s'</span>, <span class=\"hljs-number\">34</span>]); \n<span class=\"hljs-comment\">// [ 1, 2, 3, 'a', 's', 34 ]</span>\n\n</code></pre>\n<ol start=\"11\">\n<li>countOccurrencesï¼šæ£€æµ‹æ•°å€¼å‡ºç°æ¬¡æ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> countOccurrences = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, val</span>) =&gt;</span> arr.reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">a, v</span>) =&gt;</span> (v === val ? a + <span class=\"hljs-number\">1</span> : a), <span class=\"hljs-number\">0</span>);\ncountOccurrences([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], <span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// 3</span>\n\n</code></pre>\n<ol start=\"12\">\n<li>deepFlattenï¼šé€’å½’æ‰å¹³åŒ–æ•°ç»„</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> deepFlatten = <span class=\"hljs-function\"><span class=\"hljs-params\">arr</span> =&gt;</span> [].concat(...arr.map(<span class=\"hljs-function\"><span class=\"hljs-params\">v</span> =&gt;</span> (<span class=\"hljs-built_in\">Array</span>.isArray(v) ? deepFlatten(v) : v)));\n\ndeepFlatten([<span class=\"hljs-number\">1</span>, [<span class=\"hljs-number\">2</span>], [[<span class=\"hljs-number\">3</span>], <span class=\"hljs-number\">4</span>], <span class=\"hljs-number\">5</span>]); <span class=\"hljs-comment\">// [1,2,3,4,5]</span>\n\n</code></pre>\n<ol start=\"13\">\n<li>differenceï¼šå¯»æ‰¾å·®å¼‚ï¼ˆå¹¶è¿”å›ç¬¬ä¸€ä¸ªæ•°ç»„ç‹¬æœ‰çš„ï¼‰</li>\n</ol>\n<p>æ­¤ä»£ç æ®µæŸ¥æ‰¾ä¸¤ä¸ªæ•°ç»„ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªæ•°ç»„ç‹¬æœ‰çš„ã€‚</p>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> difference = <span class=\"hljs-function\">(<span class=\"hljs-params\">a, b</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> s = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>(b);\n  <span class=\"hljs-keyword\">return</span> a.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> !s.has(x));\n};\n\ndifference([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">4</span>]); <span class=\"hljs-comment\">// [3]</span>\n\n</code></pre>\n<ol start=\"14\">\n<li>differenceByï¼šå…ˆæ‰§è¡Œå†å¯»æ‰¾å·®å¼‚</li>\n</ol>\n<p>åœ¨å°†ç»™å®šå‡½æ•°åº”ç”¨äºä¸¤ä¸ªåˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ ä¹‹åï¼Œæ­¤æ–¹æ³•è¿”å›ä¸¤ä¸ªæ•°ç»„ä¹‹é—´çš„å·®å¼‚ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> differenceBy = <span class=\"hljs-function\">(<span class=\"hljs-params\">a, b, fn</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> s = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>(b.map(fn));\n  <span class=\"hljs-keyword\">return</span> a.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> !s.has(fn(x)));\n};\n\ndifferenceBy([<span class=\"hljs-number\">2.1</span>, <span class=\"hljs-number\">1.2</span>], [<span class=\"hljs-number\">2.3</span>, <span class=\"hljs-number\">3.4</span>], <span class=\"hljs-built_in\">Math</span>.floor); <span class=\"hljs-comment\">// [1.2]</span>\ndifferenceBy([{ <span class=\"hljs-attr\">x</span>: <span class=\"hljs-number\">2</span> }, { <span class=\"hljs-attr\">x</span>: <span class=\"hljs-number\">1</span> }], [{ <span class=\"hljs-attr\">x</span>: <span class=\"hljs-number\">1</span> }], v =&gt; v.x); <span class=\"hljs-comment\">// [ { x: 2 } ]</span>\n\n</code></pre>\n<ol start=\"15\">\n<li>dropWhileï¼šåˆ é™¤ä¸ç¬¦åˆæ¡ä»¶çš„å€¼</li>\n</ol>\n<p>æ­¤ä»£ç æ®µä»æ•°ç»„é¡¶éƒ¨å¼€å§‹åˆ é™¤å…ƒç´ ï¼Œç›´åˆ°ä¼ é€’çš„å‡½æ•°è¿”å›ä¸ºtrueã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> dropWhile = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, func</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">while</span> (arr.length &gt; <span class=\"hljs-number\">0</span> &amp;&amp; !func(arr[<span class=\"hljs-number\">0</span>])) arr = arr.slice(<span class=\"hljs-number\">1</span>);\n  <span class=\"hljs-keyword\">return</span> arr;\n};\n\ndropWhile([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>], n =&gt; n &gt;= <span class=\"hljs-number\">3</span>); <span class=\"hljs-comment\">// [3,4]</span>\n\n</code></pre>\n<ol start=\"16\">\n<li>flattenï¼šæŒ‡å®šæ·±åº¦æ‰å¹³åŒ–æ•°ç»„</li>\n</ol>\n<p>æ­¤ä»£ç æ®µç¬¬äºŒå‚æ•°å¯æŒ‡å®šæ·±åº¦ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> flatten = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, depth = <span class=\"hljs-number\">1</span></span>) =&gt;</span>\n  arr.reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">a, v</span>) =&gt;</span> a.concat(depth &gt; <span class=\"hljs-number\">1</span> &amp;&amp; <span class=\"hljs-built_in\">Array</span>.isArray(v) ? flatten(v, depth - <span class=\"hljs-number\">1</span>) : v), []);\n\nflatten([<span class=\"hljs-number\">1</span>, [<span class=\"hljs-number\">2</span>], <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>]); <span class=\"hljs-comment\">// [1, 2, 3, 4]</span>\nflatten([<span class=\"hljs-number\">1</span>, [<span class=\"hljs-number\">2</span>, [<span class=\"hljs-number\">3</span>, [<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>], <span class=\"hljs-number\">6</span>], <span class=\"hljs-number\">7</span>], <span class=\"hljs-number\">8</span>], <span class=\"hljs-number\">2</span>); <span class=\"hljs-comment\">// [1, 2, 3, [4, 5], 6, 7, 8]</span>\n\n</code></pre>\n<ol start=\"17\">\n<li>indexOfAllï¼šè¿”å›æ•°ç»„ä¸­æŸå€¼çš„æ‰€æœ‰ç´¢å¼•</li>\n</ol>\n<p>æ­¤ä»£ç æ®µå¯ç”¨äºè·å–æ•°ç»„ä¸­æŸä¸ªå€¼çš„æ‰€æœ‰ç´¢å¼•ï¼Œå¦‚æœæ­¤å€¼ä¸­æœªåŒ…å«è¯¥å€¼ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> indexOfAll = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, val</span>) =&gt;</span> arr.reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, el, i</span>) =&gt;</span> (el === val ? [...acc, i] : acc), []);\n\nindexOfAll([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], <span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// [0,3]</span>\nindexOfAll([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], <span class=\"hljs-number\">4</span>); <span class=\"hljs-comment\">// []</span>\n\n</code></pre>\n<ol start=\"18\">\n<li>intersectionï¼šä¸¤æ•°ç»„çš„äº¤é›†</li>\n</ol>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> intersection = <span class=\"hljs-function\">(<span class=\"hljs-params\">a, b</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> s = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>(b);\n  <span class=\"hljs-keyword\">return</span> a.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> s.has(x));\n};\n\nintersection([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], [<span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">2</span>]); <span class=\"hljs-comment\">// [2, 3]</span>\n\n</code></pre>\n<ol start=\"19\">\n<li>intersectionWithï¼šä¸¤æ•°ç»„éƒ½ç¬¦åˆæ¡ä»¶çš„äº¤é›†</li>\n</ol>\n<p>æ­¤ç‰‡æ®µå¯ç”¨äºåœ¨å¯¹ä¸¤ä¸ªæ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œäº†å‡½æ•°ä¹‹åï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„ä¸­å­˜åœ¨çš„å…ƒç´ åˆ—è¡¨ã€‚</p>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> intersectionBy = <span class=\"hljs-function\">(<span class=\"hljs-params\">a, b, fn</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> s = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>(b.map(fn));\n  <span class=\"hljs-keyword\">return</span> a.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> s.has(fn(x)));\n};\n\nintersectionBy([<span class=\"hljs-number\">2.1</span>, <span class=\"hljs-number\">1.2</span>], [<span class=\"hljs-number\">2.3</span>, <span class=\"hljs-number\">3.4</span>], <span class=\"hljs-built_in\">Math</span>.floor); <span class=\"hljs-comment\">// [2.1]</span>\n\n</code></pre>\n<ol start=\"20\">\n<li>intersectionWithï¼šå…ˆæ¯”è¾ƒåè¿”å›äº¤é›†</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> intersectionWith = <span class=\"hljs-function\">(<span class=\"hljs-params\">a, b, comp</span>) =&gt;</span> a.filter(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> b.findIndex(<span class=\"hljs-function\"><span class=\"hljs-params\">y</span> =&gt;</span> comp(x, y)) !== <span class=\"hljs-number\">-1</span>);\n\nintersectionWith([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1.2</span>, <span class=\"hljs-number\">1.5</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0</span>], [<span class=\"hljs-number\">1.9</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">3.9</span>], (a, b) =&gt; <span class=\"hljs-built_in\">Math</span>.round(a) === <span class=\"hljs-built_in\">Math</span>.round(b)); <span class=\"hljs-comment\">// [1.5, 3, 0]</span>\n\n</code></pre>\n<ol start=\"21\">\n<li>minNï¼šè¿”å›æŒ‡å®šé•¿åº¦çš„å‡åºæ•°ç»„</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> minN = <span class=\"hljs-function\">(<span class=\"hljs-params\">arr, n = <span class=\"hljs-number\">1</span></span>) =&gt;</span> [...arr].sort(<span class=\"hljs-function\">(<span class=\"hljs-params\">a, b</span>) =&gt;</span> a - b).slice(<span class=\"hljs-number\">0</span>, n);\n\nminN([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]); <span class=\"hljs-comment\">// [1]</span>\nminN([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], <span class=\"hljs-number\">2</span>); <span class=\"hljs-comment\">// [1,2]</span>\n\n</code></pre>\n<ol start=\"22\">\n<li>negateï¼šæ ¹æ®æ¡ä»¶åå‘ç­›é€‰</li>\n</ol>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> negate = <span class=\"hljs-function\"><span class=\"hljs-params\">func</span> =&gt;</span> <span class=\"hljs-function\">(<span class=\"hljs-params\">...args</span>) =&gt;</span> !func(...args);\n\n[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-number\">6</span>].filter(negate(<span class=\"hljs-function\"><span class=\"hljs-params\">n</span> =&gt;</span> n % <span class=\"hljs-number\">2</span> === <span class=\"hljs-number\">0</span>)); <span class=\"hljs-comment\">// [ 1, 3, 5 ]</span>\n\n</code></pre>\n<ol start=\"23\">\n<li>randomIntArrayInRangeï¼šç”Ÿæˆä¸¤æ•°ä¹‹é—´æŒ‡å®šé•¿åº¦çš„éšæœºæ•°ç»„</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> randomIntArrayInRange = <span class=\"hljs-function\">(<span class=\"hljs-params\">min, max, n = <span class=\"hljs-number\">1</span></span>) =&gt;</span>\n  <span class=\"hljs-built_in\">Array</span>.from({ <span class=\"hljs-attr\">length</span>: n }, () =&gt; <span class=\"hljs-built_in\">Math</span>.floor(<span class=\"hljs-built_in\">Math</span>.random() * (max - min + <span class=\"hljs-number\">1</span>)) + min);\n  \nrandomIntArrayInRange(<span class=\"hljs-number\">12</span>, <span class=\"hljs-number\">35</span>, <span class=\"hljs-number\">10</span>); <span class=\"hljs-comment\">// [ 34, 14, 27, 17, 30, 27, 20, 26, 21, 14 ]</span>\n\n</code></pre>\n<ol start=\"24\">\n<li>sampleï¼šåœ¨æŒ‡å®šæ•°ç»„ä¸­è·å–éšæœºæ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> sample = <span class=\"hljs-function\"><span class=\"hljs-params\">arr</span> =&gt;</span> arr[<span class=\"hljs-built_in\">Math</span>.floor(<span class=\"hljs-built_in\">Math</span>.random() * arr.length)];\n\nsample([<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">9</span>, <span class=\"hljs-number\">11</span>]); <span class=\"hljs-comment\">// 9</span>\n\n</code></pre>\n<ol start=\"25\">\n<li>sampleSizeï¼šåœ¨æŒ‡å®šæ•°ç»„ä¸­è·å–æŒ‡å®šé•¿åº¦çš„éšæœºæ•°</li>\n</ol>\n<p>æ­¤ä»£ç æ®µå¯ç”¨äºä»æ•°ç»„ä¸­è·å–æŒ‡å®šé•¿åº¦çš„éšæœºæ•°ï¼Œç›´è‡³ç©·å°½æ•°ç»„ã€‚ ä½¿ç”¨Fisher-Yatesç®—æ³•å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œéšæœºé€‰æ‹©ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> sampleSize = <span class=\"hljs-function\">(<span class=\"hljs-params\">[...arr], n = <span class=\"hljs-number\">1</span></span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">let</span> m = arr.length;\n  <span class=\"hljs-keyword\">while</span> (m) {\n    <span class=\"hljs-keyword\">const</span> i = <span class=\"hljs-built_in\">Math</span>.floor(<span class=\"hljs-built_in\">Math</span>.random() * m--);\n    [arr[m], arr[i]] = [arr[i], arr[m]];\n  }\n  <span class=\"hljs-keyword\">return</span> arr.slice(<span class=\"hljs-number\">0</span>, n);\n};\n\nsampleSize([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], <span class=\"hljs-number\">2</span>); <span class=\"hljs-comment\">// [3,1]</span>\nsampleSize([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>], <span class=\"hljs-number\">4</span>); <span class=\"hljs-comment\">// [2,3,1]</span>\n\n</code></pre>\n<ol start=\"26\">\n<li>shuffleï¼šâ€œæ´—ç‰Œâ€ æ•°ç»„</li>\n</ol>\n<p>æ­¤ä»£ç æ®µä½¿ç”¨Fisher-Yatesç®—æ³•éšæœºæ’åºæ•°ç»„çš„å…ƒç´ ã€‚</p>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> shuffle = <span class=\"hljs-function\">(<span class=\"hljs-params\">[...arr]</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">let</span> m = arr.length;\n  <span class=\"hljs-keyword\">while</span> (m) {\n    <span class=\"hljs-keyword\">const</span> i = <span class=\"hljs-built_in\">Math</span>.floor(<span class=\"hljs-built_in\">Math</span>.random() * m--);\n    [arr[m], arr[i]] = [arr[i], arr[m]];\n  }\n  <span class=\"hljs-keyword\">return</span> arr;\n};\n\n<span class=\"hljs-keyword\">const</span> foo = [<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>];\nshuffle(foo); <span class=\"hljs-comment\">// [2, 3, 1], foo = [1, 2, 3]</span>\n\n</code></pre>\n<ol start=\"27\">\n<li>nestï¼šæ ¹æ®parent_idç”Ÿæˆæ ‘ç»“æ„ï¼ˆé˜¿é‡Œä¸€é¢çœŸé¢˜ï¼‰</li>\n</ol>\n<p>æ ¹æ®æ¯é¡¹çš„parent_idï¼Œç”Ÿæˆå…·ä½“æ ‘å½¢ç»“æ„çš„å¯¹è±¡ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> nest = <span class=\"hljs-function\">(<span class=\"hljs-params\">items, id = <span class=\"hljs-literal\">null</span>, link = <span class=\"hljs-string\">'parent_id'</span></span>) =&gt;</span>\n  items\n    .filter(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> item[link] === id)\n    .map(<span class=\"hljs-function\"><span class=\"hljs-params\">item</span> =&gt;</span> ({ ...item, <span class=\"hljs-attr\">children</span>: nest(items, item.id) }));\n\n</code></pre>\n<p>ç”¨æ³•ï¼š</p>\n<pre><code class=\"language-js\">  <span class=\"hljs-keyword\">const</span> comments = [\n  { <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">parent_id</span>: <span class=\"hljs-literal\">null</span> },\n  { <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">2</span>, <span class=\"hljs-attr\">parent_id</span>: <span class=\"hljs-number\">1</span> },\n  { <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">3</span>, <span class=\"hljs-attr\">parent_id</span>: <span class=\"hljs-number\">1</span> },\n  { <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">4</span>, <span class=\"hljs-attr\">parent_id</span>: <span class=\"hljs-number\">2</span> },\n  { <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">5</span>, <span class=\"hljs-attr\">parent_id</span>: <span class=\"hljs-number\">4</span> }\n];\n<span class=\"hljs-keyword\">const</span> nestedComments = nest(comments); <span class=\"hljs-comment\">// [{ id: 1, parent_id: null, children: [...] }]</span>\n\n</code></pre>\n<h2>å‡½æ•°</h2>\n<ol>\n<li>attemptï¼šæ•è·å‡½æ•°è¿è¡Œå¼‚å¸¸</li>\n</ol>\n<p>è¯¥ä»£ç æ®µæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ç»“æœæˆ–æ•è·çš„é”™è¯¯å¯¹è±¡ã€‚</p>\n<pre><code class=\"language-js\">onst attempt = <span class=\"hljs-function\">(<span class=\"hljs-params\">fn, ...args</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">return</span> fn(...args);\n  } <span class=\"hljs-keyword\">catch</span> (e) {\n    <span class=\"hljs-keyword\">return</span> e <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-built_in\">Error</span> ? e : <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Error</span>(e);\n  }\n};\n<span class=\"hljs-keyword\">var</span> elements = attempt(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">selector</span>) </span>{\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">document</span>.querySelectorAll(selector);\n}, <span class=\"hljs-string\">'&gt;_&gt;'</span>);\n<span class=\"hljs-keyword\">if</span> (elements <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-built_in\">Error</span>) elements = []; <span class=\"hljs-comment\">// elements = []</span>\n\n</code></pre>\n<ol start=\"2\">\n<li>deferï¼šæ¨è¿Ÿæ‰§è¡Œ</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> defer = <span class=\"hljs-function\">(<span class=\"hljs-params\">fn, ...args</span>) =&gt;</span> setTimeout(fn, <span class=\"hljs-number\">1</span>, ...args);\n\ndefer(<span class=\"hljs-built_in\">console</span>.log, <span class=\"hljs-string\">'a'</span>), <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'b'</span>); <span class=\"hljs-comment\">// logs 'b' then 'a'</span>\n\n</code></pre>\n<ol start=\"3\">\n<li>runPromisesInSeriesï¼šè¿è¡Œå¤šä¸ªPromises</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> runPromisesInSeries = <span class=\"hljs-function\"><span class=\"hljs-params\">ps</span> =&gt;</span> ps.reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">p, next</span>) =&gt;</span> p.then(next), <span class=\"hljs-built_in\">Promise</span>.resolve());\n<span class=\"hljs-keyword\">const</span> delay = <span class=\"hljs-function\"><span class=\"hljs-params\">d</span> =&gt;</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">r</span> =&gt;</span> setTimeout(r, d));\n\nrunPromisesInSeries([<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> delay(<span class=\"hljs-number\">1000</span>), () =&gt; delay(<span class=\"hljs-number\">2000</span>)]);\n<span class=\"hljs-comment\">//ä¾æ¬¡æ‰§è¡Œæ¯ä¸ªPromises ï¼Œæ€»å…±éœ€è¦3ç§’é’Ÿæ‰èƒ½å®Œæˆ</span>\n\n</code></pre>\n<ol start=\"4\">\n<li>timeTakenï¼šè®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´</li>\n</ol>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> timeTaken = <span class=\"hljs-function\"><span class=\"hljs-params\">callback</span> =&gt;</span> {\n  <span class=\"hljs-built_in\">console</span>.time(<span class=\"hljs-string\">'timeTaken'</span>);\n  <span class=\"hljs-keyword\">const</span> r = callback();\n  <span class=\"hljs-built_in\">console</span>.timeEnd(<span class=\"hljs-string\">'timeTaken'</span>);\n  <span class=\"hljs-keyword\">return</span> r;\n};\n\ntimeTaken(<span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> <span class=\"hljs-built_in\">Math</span>.pow(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">10</span>)); <span class=\"hljs-comment\">// 1024, (logged): timeTaken: 0.02099609375ms</span>\n\n</code></pre>\n<ol start=\"5\">\n<li>createEventHubï¼šç®€å•çš„å‘å¸ƒ/è®¢é˜…æ¨¡å¼</li>\n</ol>\n<p>åˆ›å»ºä¸€ä¸ªå‘å¸ƒ/è®¢é˜…ï¼ˆå‘å¸ƒ-è®¢é˜…ï¼‰äº‹ä»¶é›†çº¿ï¼Œæœ‰emitï¼Œonå’Œoffæ–¹æ³•ã€‚</p>\n<ul>\n<li>ä½¿ç”¨Object.create(null)åˆ›å»ºä¸€ä¸ªç©ºçš„hubå¯¹è±¡ã€‚</li>\n<li>emitï¼Œæ ¹æ®eventå‚æ•°è§£æå¤„ç†ç¨‹åºæ•°ç»„ï¼Œç„¶å.forEach()é€šè¿‡ä¼ å…¥æ•°æ®ä½œä¸ºå‚æ•°æ¥è¿è¡Œæ¯ä¸ªå¤„ç†ç¨‹åºã€‚</li>\n<li>onï¼Œä¸ºäº‹ä»¶åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼ˆè‹¥ä¸å­˜åœ¨åˆ™ä¸ºç©ºæ•°ç»„ï¼‰ï¼Œç„¶å.push()å°†å¤„ç†ç¨‹åºæ·»åŠ åˆ°è¯¥æ•°ç»„ã€‚</li>\n<li>offï¼Œç”¨.findIndex()åœ¨äº‹ä»¶æ•°ç»„ä¸­æŸ¥æ‰¾å¤„ç†ç¨‹åºçš„ç´¢å¼•ï¼Œå¹¶ä½¿ç”¨.splice()åˆ é™¤ã€‚</li>\n</ul>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> createEventHub = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> ({\n  <span class=\"hljs-attr\">hub</span>: <span class=\"hljs-built_in\">Object</span>.create(<span class=\"hljs-literal\">null</span>),\n  emit(event, data) {\n    (<span class=\"hljs-keyword\">this</span>.hub[event] || []).forEach(<span class=\"hljs-function\"><span class=\"hljs-params\">handler</span> =&gt;</span> handler(data));\n  },\n  on(event, handler) {\n    <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">this</span>.hub[event]) <span class=\"hljs-keyword\">this</span>.hub[event] = [];\n    <span class=\"hljs-keyword\">this</span>.hub[event].push(handler);\n  },\n  off(event, handler) {\n    <span class=\"hljs-keyword\">const</span> i = (<span class=\"hljs-keyword\">this</span>.hub[event] || []).findIndex(<span class=\"hljs-function\"><span class=\"hljs-params\">h</span> =&gt;</span> h === handler);\n    <span class=\"hljs-keyword\">if</span> (i &gt; <span class=\"hljs-number\">-1</span>) <span class=\"hljs-keyword\">this</span>.hub[event].splice(i, <span class=\"hljs-number\">1</span>);\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.hub[event].length === <span class=\"hljs-number\">0</span>) <span class=\"hljs-keyword\">delete</span> <span class=\"hljs-keyword\">this</span>.hub[event];\n  }\n});\n\n</code></pre>\n<p>ç”¨æ³•ï¼š</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> handler = <span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> <span class=\"hljs-built_in\">console</span>.log(data);\n<span class=\"hljs-keyword\">const</span> hub = createEventHub();\n<span class=\"hljs-keyword\">let</span> increment = <span class=\"hljs-number\">0</span>;\n\n<span class=\"hljs-comment\">// è®¢é˜…ï¼Œç›‘å¬ä¸åŒäº‹ä»¶</span>\nhub.on(<span class=\"hljs-string\">'message'</span>, handler);\nhub.on(<span class=\"hljs-string\">'message'</span>, () =&gt; <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'Message event fired'</span>));\nhub.on(<span class=\"hljs-string\">'increment'</span>, () =&gt; increment++);\n\n<span class=\"hljs-comment\">// å‘å¸ƒï¼šå‘å‡ºäº‹ä»¶ä»¥è°ƒç”¨æ‰€æœ‰è®¢é˜…ç»™å®ƒä»¬çš„å¤„ç†ç¨‹åºï¼Œå¹¶å°†æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒä»¬</span>\nhub.emit(<span class=\"hljs-string\">'message'</span>, <span class=\"hljs-string\">'hello world'</span>); <span class=\"hljs-comment\">// æ‰“å° 'hello world' å’Œ 'Message event fired'</span>\nhub.emit(<span class=\"hljs-string\">'message'</span>, { <span class=\"hljs-attr\">hello</span>: <span class=\"hljs-string\">'world'</span> }); <span class=\"hljs-comment\">// æ‰“å° å¯¹è±¡ å’Œ 'Message event fired'</span>\nhub.emit(<span class=\"hljs-string\">'increment'</span>); <span class=\"hljs-comment\">// increment = 1</span>\n\n<span class=\"hljs-comment\">// åœæ­¢è®¢é˜…</span>\nhub.off(<span class=\"hljs-string\">'message'</span>, handler);\n\n</code></pre>\n<ol start=\"6\">\n<li>memoizeï¼šç¼“å­˜å‡½æ•°</li>\n</ol>\n<p>é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ªMapå¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªç©ºçš„ç¼“å­˜ã€‚</p>\n<p>é€šè¿‡æ£€æŸ¥è¾“å…¥å€¼çš„å‡½æ•°è¾“å‡ºæ˜¯å¦å·²ç¼“å­˜ï¼Œè¿”å›å­˜å‚¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œè¯¥å‚æ•°å°†è¢«æä¾›ç»™å·²è®°å¿†çš„å‡½æ•°ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™å­˜å‚¨å¹¶è¿”å›å®ƒã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> memoize = <span class=\"hljs-function\"><span class=\"hljs-params\">fn</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> cache = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>();\n  <span class=\"hljs-keyword\">const</span> cached = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">val</span>) </span>{\n    <span class=\"hljs-keyword\">return</span> cache.has(val) ? cache.get(val) : cache.set(val, fn.call(<span class=\"hljs-keyword\">this</span>, val)) &amp;&amp; cache.get(val);\n  };\n  cached.cache = cache;\n  <span class=\"hljs-keyword\">return</span> cached;\n};\n\n\n</code></pre>\n<p>Ps: è¿™ä¸ªç‰ˆæœ¬å¯èƒ½ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œè¿˜æœ‰Vueæºç ç‰ˆçš„ï¼š</p>\n<pre><code class=\"language-js\"><span class=\"hljs-comment\">/**\n * Create a cached version of a pure function.\n */</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">cached</span>&lt;<span class=\"hljs-title\">F</span>: <span class=\"hljs-title\">Function</span>&gt; (<span class=\"hljs-params\">fn: F</span>): <span class=\"hljs-title\">F</span> </span>{\n  <span class=\"hljs-keyword\">const</span> cache = <span class=\"hljs-built_in\">Object</span>.create(<span class=\"hljs-literal\">null</span>)\n  <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">cachedFn</span> (<span class=\"hljs-params\">str: string</span>) </span>{\n    <span class=\"hljs-keyword\">const</span> hit = cache[str]\n    <span class=\"hljs-keyword\">return</span> hit || (cache[str] = fn(str))\n  }: any)\n}\n\n</code></pre>\n<ol start=\"7\">\n<li>onceï¼šåªè°ƒç”¨ä¸€æ¬¡çš„å‡½æ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> once = <span class=\"hljs-function\"><span class=\"hljs-params\">fn</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">let</span> called = <span class=\"hljs-literal\">false</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) </span>{\n    <span class=\"hljs-keyword\">if</span> (!called) {\n      called = <span class=\"hljs-literal\">true</span>\n      fn.apply(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-built_in\">arguments</span>)\n    }\n  }\n};\n\n</code></pre>\n<ol start=\"8\">\n<li>flattenObjectï¼šä»¥é”®çš„è·¯å¾„æ‰å¹³åŒ–å¯¹è±¡</li>\n</ol>\n<p>ä½¿ç”¨é€’å½’ã€‚</p>\n<ul>\n<li>åˆ©ç”¨Object.keys(obj)è”åˆArray.prototype.reduce()ï¼Œä»¥æ¯ç‰‡å¶å­èŠ‚ç‚¹è½¬æ¢ä¸ºæ‰å¹³çš„è·¯å¾„èŠ‚ç‚¹ã€‚</li>\n<li>å¦‚æœé”®çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å‡½æ•°ä½¿ç”¨è°ƒç”¨é€‚å½“çš„è‡ªèº«prefixä»¥åˆ›å»ºè·¯å¾„Object.assign()ã€‚</li>\n<li>å¦åˆ™ï¼Œå®ƒå°†é€‚å½“çš„å‰ç¼€é”®å€¼å¯¹æ·»åŠ åˆ°ç´¯åŠ å™¨å¯¹è±¡ã€‚</li>\n<li>prefixé™¤éæ‚¨å¸Œæœ›æ¯ä¸ªé”®éƒ½æœ‰ä¸€ä¸ªå‰ç¼€ï¼Œå¦åˆ™åº”å§‹ç»ˆçœç•¥ç¬¬äºŒä¸ªå‚æ•°ã€‚</li>\n</ul>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> flattenObject = <span class=\"hljs-function\">(<span class=\"hljs-params\">obj, prefix = <span class=\"hljs-string\">''</span></span>) =&gt;</span>\n  <span class=\"hljs-built_in\">Object</span>.keys(obj).reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, k</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> pre = prefix.length ? prefix + <span class=\"hljs-string\">'.'</span> : <span class=\"hljs-string\">''</span>;\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">typeof</span> obj[k] === <span class=\"hljs-string\">'object'</span>) <span class=\"hljs-built_in\">Object</span>.assign(acc, flattenObject(obj[k], pre + k));\n    <span class=\"hljs-keyword\">else</span> acc[pre + k] = obj[k];\n    <span class=\"hljs-keyword\">return</span> acc;\n  }, {});\n  \nflattenObject({ <span class=\"hljs-attr\">a</span>: { <span class=\"hljs-attr\">b</span>: { <span class=\"hljs-attr\">c</span>: <span class=\"hljs-number\">1</span> } }, <span class=\"hljs-attr\">d</span>: <span class=\"hljs-number\">1</span> }); <span class=\"hljs-comment\">// { 'a.b.c': 1, d: 1 }</span>\n\n</code></pre>\n<ol start=\"9\">\n<li>unflattenObjectï¼šä»¥é”®çš„è·¯å¾„å±•å¼€å¯¹è±¡</li>\n</ol>\n<p>ä¸ä¸Šé¢çš„ç›¸åï¼Œå±•å¼€å¯¹è±¡ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> unflattenObject = <span class=\"hljs-function\"><span class=\"hljs-params\">obj</span> =&gt;</span>\n  <span class=\"hljs-built_in\">Object</span>.keys(obj).reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, k</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (k.indexOf(<span class=\"hljs-string\">'.'</span>) !== <span class=\"hljs-number\">-1</span>) {\n      <span class=\"hljs-keyword\">const</span> keys = k.split(<span class=\"hljs-string\">'.'</span>);\n      <span class=\"hljs-built_in\">Object</span>.assign(\n        acc,\n        <span class=\"hljs-built_in\">JSON</span>.parse(\n          <span class=\"hljs-string\">'{'</span> +\n            keys.map(<span class=\"hljs-function\">(<span class=\"hljs-params\">v, i</span>) =&gt;</span> (i !== keys.length - <span class=\"hljs-number\">1</span> ? <span class=\"hljs-string\">`\"<span class=\"hljs-subst\">${v}</span>\":{`</span> : <span class=\"hljs-string\">`\"<span class=\"hljs-subst\">${v}</span>\":`</span>)).join(<span class=\"hljs-string\">''</span>) +\n            obj[k] +\n            <span class=\"hljs-string\">'}'</span>.repeat(keys.length)\n        )\n      );\n    } <span class=\"hljs-keyword\">else</span> acc[k] = obj[k];\n    <span class=\"hljs-keyword\">return</span> acc;\n  }, {});\n  \nunflattenObject({ <span class=\"hljs-string\">'a.b.c'</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">d</span>: <span class=\"hljs-number\">1</span> }); <span class=\"hljs-comment\">// { a: { b: { c: 1 } }, d: 1 }</span>\n\n</code></pre>\n<p>è¿™ä¸ªçš„ç”¨é€”ï¼Œåœ¨åšTreeç»„ä»¶æˆ–å¤æ‚è¡¨å•æ—¶å–å€¼éå¸¸èˆ’æœã€‚</p>\n<h2>å­—ç¬¦ä¸²</h2>\n<ol>\n<li>byteSizeï¼šè¿”å›å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> byteSize = <span class=\"hljs-function\"><span class=\"hljs-params\">str</span> =&gt;</span> <span class=\"hljs-keyword\">new</span> Blob([str]).size;\n\nbyteSize(<span class=\"hljs-string\">'ğŸ˜€'</span>); <span class=\"hljs-comment\">// 4</span>\nbyteSize(<span class=\"hljs-string\">'Hello World'</span>); <span class=\"hljs-comment\">// 11</span>\n\n</code></pre>\n<ol start=\"2\">\n<li>capitalizeï¼šé¦–å­—æ¯å¤§å†™</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> capitalize = <span class=\"hljs-function\">(<span class=\"hljs-params\">[first, ...rest]</span>) =&gt;</span>\n  first.toUpperCase() + rest.join(<span class=\"hljs-string\">''</span>);\n  \ncapitalize(<span class=\"hljs-string\">'fooBar'</span>); <span class=\"hljs-comment\">// 'FooBar'</span>\ncapitalize(<span class=\"hljs-string\">'fooBar'</span>, <span class=\"hljs-literal\">true</span>); <span class=\"hljs-comment\">// 'Foobar'</span>\n\n</code></pre>\n<ol start=\"3\">\n<li>capitalizeEveryWordï¼šæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> capitalizeEveryWord = <span class=\"hljs-function\"><span class=\"hljs-params\">str</span> =&gt;</span> str.replace(<span class=\"hljs-regexp\">/\\b[a-z]/g</span>, char =&gt; char.toUpperCase());\n\ncapitalizeEveryWord(<span class=\"hljs-string\">'hello world!'</span>); <span class=\"hljs-comment\">// 'Hello World!'</span>\n\n</code></pre>\n<ol start=\"4\">\n<li>decapitalizeï¼šé¦–å­—æ¯å°å†™</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> decapitalize = <span class=\"hljs-function\">(<span class=\"hljs-params\">[first, ...rest]</span>) =&gt;</span>\n  first.toLowerCase() + rest.join(<span class=\"hljs-string\">''</span>)\n\ndecapitalize(<span class=\"hljs-string\">'FooBar'</span>); <span class=\"hljs-comment\">// 'fooBar'</span>\ndecapitalize(<span class=\"hljs-string\">'FooBar'</span>); <span class=\"hljs-comment\">// 'fooBar'</span>\n\n</code></pre>\n<ol start=\"5\">\n<li>luhnCheckï¼šé“¶è¡Œå¡å·ç æ ¡éªŒï¼ˆluhnç®—æ³•ï¼‰</li>\n</ol>\n<p>Luhnç®—æ³•çš„å®ç°ï¼Œç”¨äºéªŒè¯å„ç§æ ‡è¯†å·ï¼Œä¾‹å¦‚ä¿¡ç”¨å¡å·ï¼ŒIMEIå·ï¼Œå›½å®¶æä¾›å•†æ ‡è¯†å·ç­‰ã€‚</p>\n<p>ä¸String.prototype.split('')ç»“åˆä½¿ç”¨ï¼Œä»¥è·å–æ•°å­—æ•°ç»„ã€‚è·å¾—æœ€åä¸€ä¸ªæ•°å­—ã€‚å®æ–½luhnç®—æ³•ã€‚å¦‚æœè¢«æ•´é™¤ï¼Œåˆ™è¿”å›ï¼Œå¦åˆ™è¿”å›ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> luhnCheck = <span class=\"hljs-function\"><span class=\"hljs-params\">num</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">let</span> arr = (num + <span class=\"hljs-string\">''</span>)\n    .split(<span class=\"hljs-string\">''</span>)\n    .reverse()\n    .map(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =&gt;</span> <span class=\"hljs-built_in\">parseInt</span>(x));\n  <span class=\"hljs-keyword\">let</span> lastDigit = arr.splice(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">1</span>)[<span class=\"hljs-number\">0</span>];\n  <span class=\"hljs-keyword\">let</span> sum = arr.reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, val, i</span>) =&gt;</span> (i % <span class=\"hljs-number\">2</span> !== <span class=\"hljs-number\">0</span> ? acc + val : acc + ((val * <span class=\"hljs-number\">2</span>) % <span class=\"hljs-number\">9</span>) || <span class=\"hljs-number\">9</span>), <span class=\"hljs-number\">0</span>);\n  sum += lastDigit;\n  <span class=\"hljs-keyword\">return</span> sum % <span class=\"hljs-number\">10</span> === <span class=\"hljs-number\">0</span>;\n};\n\n</code></pre>\n<p>ç”¨ä¾‹:</p>\n<pre><code class=\"language-js\">luhnCheck(<span class=\"hljs-string\">'4485275742308327'</span>); <span class=\"hljs-comment\">// true</span>\nluhnCheck(<span class=\"hljs-number\">6011329933655299</span>); <span class=\"hljs-comment\">//  false</span>\nluhnCheck(<span class=\"hljs-number\">123456789</span>); <span class=\"hljs-comment\">// false</span>\n</code></pre>\n<p>è¡¥å……ï¼šé“¶è¡Œå¡å·ç çš„æ ¡éªŒè§„åˆ™ï¼š</p>\n<p>é“¶è¡Œå¡å·ç çš„æ ¡éªŒé‡‡ç”¨Luhnç®—æ³•ï¼Œæ ¡éªŒè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>ä»å³åˆ°å·¦ç»™å¡å·å­—ç¬¦ä¸²ç¼–å·ï¼Œæœ€å³è¾¹ç¬¬ä¸€ä½æ˜¯1ï¼Œæœ€å³è¾¹ç¬¬äºŒä½æ˜¯2ï¼Œæœ€å³è¾¹ç¬¬ä¸‰ä½æ˜¯3â€¦.</li>\n<li>ä»å³å‘å·¦éå†ï¼Œå¯¹æ¯ä¸€ä½å­—ç¬¦tæ‰§è¡Œç¬¬ä¸‰ä¸ªæ­¥éª¤ï¼Œå¹¶å°†æ¯ä¸€ä½çš„è®¡ç®—ç»“æœç›¸åŠ å¾—åˆ°ä¸€ä¸ªæ•°sã€‚</li>\n<li>å¯¹æ¯ä¸€ä½çš„è®¡ç®—è§„åˆ™ï¼šå¦‚æœè¿™ä¸€ä½æ˜¯å¥‡æ•°ä½ï¼Œåˆ™è¿”å›tæœ¬èº«ï¼Œå¦‚æœæ˜¯å¶æ•°ä½ï¼Œåˆ™å…ˆå°†tä¹˜ä»¥2å¾—åˆ°ä¸€ä¸ªæ•°nï¼Œå¦‚æœnæ˜¯ä¸€ä½æ•°ï¼ˆå°äº10ï¼‰ï¼Œç›´æ¥è¿”å›nï¼Œå¦åˆ™å°†nçš„ä¸ªä½æ•°å’Œåä½æ•°ç›¸åŠ è¿”å›ã€‚</li>\n<li>å¦‚æœsèƒ½å¤Ÿæ•´é™¤10ï¼Œåˆ™æ­¤å·ç æœ‰æ•ˆï¼Œå¦åˆ™å·ç æ— æ•ˆã€‚</li>\n</ul>\n<p>å› ä¸ºæœ€ç»ˆçš„ç»“æœä¼šå¯¹10å–ä½™æ¥åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿæ•´é™¤10ï¼Œæ‰€ä»¥åˆå«åšæ¨¡10ç®—æ³•ã€‚\nå½“ç„¶ï¼Œè¿˜æ˜¯åº“æ¯”è¾ƒé¦™: bankcardinfo</p>\n<ol start=\"6\">\n<li>splitLinesï¼šå°†å¤šè¡Œå­—ç¬¦ä¸²æ‹†åˆ†ä¸ºè¡Œæ•°ç»„ã€‚</li>\n</ol>\n<p>ä½¿ç”¨String.prototype.split()å’Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¢è¡Œç¬¦å¹¶åˆ›å»ºä¸€ä¸ªæ•°ç»„ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> splitLines = <span class=\"hljs-function\"><span class=\"hljs-params\">str</span> =&gt;</span> str.split(<span class=\"hljs-regexp\">/\\r?\\n/</span>);\n\nsplitLines(<span class=\"hljs-string\">'This\\nis a\\nmultiline\\nstring.\\n'</span>); <span class=\"hljs-comment\">// ['This', 'is a', 'multiline', 'string.' , '']</span>\n\n</code></pre>\n<ol start=\"7\">\n<li>stripHTMLTagsï¼šåˆ é™¤å­—ç¬¦ä¸²ä¸­çš„HTMlæ ‡ç­¾</li>\n</ol>\n<p>ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤HTML / XMLæ ‡ç­¾ã€‚</p>\n<p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤HTML / XML æ ‡è®°ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> stripHTMLTags = <span class=\"hljs-function\"><span class=\"hljs-params\">str</span> =&gt;</span> str.replace(<span class=\"hljs-regexp\">/&lt;[^&gt;]*&gt;/g</span>, <span class=\"hljs-string\">''</span>);\n\nstripHTMLTags(<span class=\"hljs-string\">'&lt;p&gt;&lt;em&gt;lorem&lt;/em&gt; &lt;strong&gt;ipsum&lt;/strong&gt;&lt;/p&gt;'</span>); <span class=\"hljs-comment\">// 'lorem ipsum'</span>\n\n</code></pre>\n<h2>å¯¹è±¡</h2>\n<ol>\n<li>dayOfYearï¼šå½“å‰æ—¥æœŸå¤©æ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> dayOfYear = <span class=\"hljs-function\"><span class=\"hljs-params\">date</span> =&gt;</span>\n  <span class=\"hljs-built_in\">Math</span>.floor((date - <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>(date.getFullYear(), <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>)) / <span class=\"hljs-number\">1000</span> / <span class=\"hljs-number\">60</span> / <span class=\"hljs-number\">60</span> / <span class=\"hljs-number\">24</span>);\n\ndayOfYear(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>()); <span class=\"hljs-comment\">// 285</span>\n\n</code></pre>\n<ol start=\"2\">\n<li>forOwnï¼šè¿­ä»£å±æ€§å¹¶æ‰§è¡Œå›è°ƒ</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> forOwn = <span class=\"hljs-function\">(<span class=\"hljs-params\">obj, fn</span>) =&gt;</span> <span class=\"hljs-built_in\">Object</span>.keys(obj).forEach(<span class=\"hljs-function\"><span class=\"hljs-params\">key</span> =&gt;</span> fn(obj[key], key, obj));\nforOwn({ <span class=\"hljs-attr\">foo</span>: <span class=\"hljs-string\">'bar'</span>, <span class=\"hljs-attr\">a</span>: <span class=\"hljs-number\">1</span> }, v =&gt; <span class=\"hljs-built_in\">console</span>.log(v)); <span class=\"hljs-comment\">// 'bar', 1</span>\n\n</code></pre>\n<ol start=\"3\">\n<li>Get Time From Dateï¼šè¿”å›å½“å‰24å°æ—¶åˆ¶æ—¶é—´çš„å­—ç¬¦ä¸²</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> getColonTimeFromDate = <span class=\"hljs-function\"><span class=\"hljs-params\">date</span> =&gt;</span> date.toTimeString().slice(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">8</span>);\n\ngetColonTimeFromDate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>()); <span class=\"hljs-comment\">// \"08:38:00\"</span>\n\n</code></pre>\n<ol start=\"4\">\n<li>Get Days Between Datesï¼šè¿”å›æ—¥æœŸé—´çš„å¤©æ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> getDaysDiffBetweenDates = <span class=\"hljs-function\">(<span class=\"hljs-params\">dateInitial, dateFinal</span>) =&gt;</span>\n  (dateFinal - dateInitial) / (<span class=\"hljs-number\">1000</span> * <span class=\"hljs-number\">3600</span> * <span class=\"hljs-number\">24</span>);\n  \ngetDaysDiffBetweenDates(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>(<span class=\"hljs-string\">'2019-01-01'</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>(<span class=\"hljs-string\">'2019-10-14'</span>)); <span class=\"hljs-comment\">// 286</span>\n\n</code></pre>\n<ol start=\"5\">\n<li>isï¼šæ£€æŸ¥å€¼æ˜¯å¦ä¸ºç‰¹å®šç±»å‹ã€‚</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> is = <span class=\"hljs-function\">(<span class=\"hljs-params\">type, val</span>) =&gt;</span> ![, <span class=\"hljs-literal\">null</span>].includes(val) &amp;&amp; val.constructor === type;\n\nis(<span class=\"hljs-built_in\">Array</span>, [<span class=\"hljs-number\">1</span>]); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">ArrayBuffer</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">ArrayBuffer</span>()); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">Map</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Map</span>()); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">RegExp</span>, /./g); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">Set</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>()); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">WeakMap</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">WeakMap</span>()); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">WeakSet</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">WeakSet</span>()); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">String</span>, <span class=\"hljs-string\">''</span>); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">String</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">String</span>(<span class=\"hljs-string\">''</span>)); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">Number</span>, <span class=\"hljs-number\">1</span>); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">Number</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Number</span>(<span class=\"hljs-number\">1</span>)); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">Boolean</span>, <span class=\"hljs-literal\">true</span>); <span class=\"hljs-comment\">// true</span>\nis(<span class=\"hljs-built_in\">Boolean</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Boolean</span>(<span class=\"hljs-literal\">true</span>)); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"6\">\n<li>isAfterDateï¼šæ£€æŸ¥æ˜¯å¦åœ¨æŸæ—¥æœŸå</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> isAfterDate = <span class=\"hljs-function\">(<span class=\"hljs-params\">dateA, dateB</span>) =&gt;</span> dateA &gt; dateB;\n\nisAfterDate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>(<span class=\"hljs-number\">2010</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">21</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>(<span class=\"hljs-number\">2010</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">20</span>)); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"7\">\n<li>isBeforeDateï¼šæ£€æŸ¥æ˜¯å¦åœ¨æŸæ—¥æœŸå‰</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> isBeforeDate = <span class=\"hljs-function\">(<span class=\"hljs-params\">dateA, dateB</span>) =&gt;</span> dateA &lt; dateB;\n\nisBeforeDate(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>(<span class=\"hljs-number\">2010</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">20</span>), <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>(<span class=\"hljs-number\">2010</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">21</span>)); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"8\">\n<li>tomorrowï¼šè·å–æ˜å¤©çš„å­—ç¬¦ä¸²æ ¼å¼æ—¶é—´</li>\n</ol>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> tomorrow = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">let</span> t = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>();\n  t.setDate(t.getDate() + <span class=\"hljs-number\">1</span>);\n  <span class=\"hljs-keyword\">return</span> t.toISOString().split(<span class=\"hljs-string\">'T'</span>)[<span class=\"hljs-number\">0</span>];\n};\n\ntomorrow(); <span class=\"hljs-comment\">// 2019-10-15 (å¦‚æœæ˜å¤©æ˜¯2019-10-15)</span>\n\n</code></pre>\n<ol start=\"9\">\n<li>equalsï¼šå…¨ç­‰åˆ¤æ–­</li>\n</ol>\n<p>åœ¨ä¸¤ä¸ªå˜é‡ä¹‹é—´è¿›è¡Œæ·±åº¦æ¯”è¾ƒä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦å…¨ç­‰ã€‚</p>\n<p>æ­¤ä»£ç æ®µç²¾ç®€çš„æ ¸å¿ƒåœ¨äºArray.prototype.every()çš„ä½¿ç”¨ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> equals = <span class=\"hljs-function\">(<span class=\"hljs-params\">a, b</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">if</span> (a === b) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n  <span class=\"hljs-keyword\">if</span> (a <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-built_in\">Date</span> &amp;&amp; b <span class=\"hljs-keyword\">instanceof</span> <span class=\"hljs-built_in\">Date</span>) <span class=\"hljs-keyword\">return</span> a.getTime() === b.getTime();\n  <span class=\"hljs-keyword\">if</span> (!a || !b || (<span class=\"hljs-keyword\">typeof</span> a !== <span class=\"hljs-string\">'object'</span> &amp;&amp; <span class=\"hljs-keyword\">typeof</span> b !== <span class=\"hljs-string\">'object'</span>)) <span class=\"hljs-keyword\">return</span> a === b;\n  <span class=\"hljs-keyword\">if</span> (a.prototype !== b.prototype) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">let</span> keys = <span class=\"hljs-built_in\">Object</span>.keys(a);\n  <span class=\"hljs-keyword\">if</span> (keys.length !== <span class=\"hljs-built_in\">Object</span>.keys(b).length) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n  <span class=\"hljs-keyword\">return</span> keys.every(<span class=\"hljs-function\"><span class=\"hljs-params\">k</span> =&gt;</span> equals(a[k], b[k]));\n};\n\n</code></pre>\n<p>ç”¨æ³•ï¼š</p>\n<pre><code class=\"language-js\">equals({ <span class=\"hljs-attr\">a</span>: [<span class=\"hljs-number\">2</span>, { <span class=\"hljs-attr\">e</span>: <span class=\"hljs-number\">3</span> }], <span class=\"hljs-attr\">b</span>: [<span class=\"hljs-number\">4</span>], <span class=\"hljs-attr\">c</span>: <span class=\"hljs-string\">'foo'</span> }, { <span class=\"hljs-attr\">a</span>: [<span class=\"hljs-number\">2</span>, { <span class=\"hljs-attr\">e</span>: <span class=\"hljs-number\">3</span> }], <span class=\"hljs-attr\">b</span>: [<span class=\"hljs-number\">4</span>], <span class=\"hljs-attr\">c</span>: <span class=\"hljs-string\">'foo'</span> }); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<h2>æ•°å­—</h2>\n<ol>\n<li>randomIntegerInRangeï¼šç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºæ•´æ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> randomIntegerInRange = <span class=\"hljs-function\">(<span class=\"hljs-params\">min, max</span>) =&gt;</span> <span class=\"hljs-built_in\">Math</span>.floor(<span class=\"hljs-built_in\">Math</span>.random() * (max - min + <span class=\"hljs-number\">1</span>)) + min;\n\nrandomIntegerInRange(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">5</span>); <span class=\"hljs-comment\">// 3</span>\n\n</code></pre>\n<ol start=\"2\">\n<li>randomNumberInRangeï¼šç”ŸæˆæŒ‡å®šèŒƒå›´çš„éšæœºå°æ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> randomNumberInRange = <span class=\"hljs-function\">(<span class=\"hljs-params\">min, max</span>) =&gt;</span> <span class=\"hljs-built_in\">Math</span>.random() * (max - min) + min;\n\nrandomNumberInRange(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">10</span>); <span class=\"hljs-comment\">// 6.0211363285087005</span>\n\n</code></pre>\n<ol start=\"3\">\n<li>roundï¼šå››èˆäº”å…¥åˆ°æŒ‡å®šä½æ•°</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> round = <span class=\"hljs-function\">(<span class=\"hljs-params\">n, decimals = <span class=\"hljs-number\">0</span></span>) =&gt;</span> <span class=\"hljs-built_in\">Number</span>(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${<span class=\"hljs-built_in\">Math</span>.round(<span class=\"hljs-string\">`<span class=\"hljs-subst\">${n}</span>e<span class=\"hljs-subst\">${decimals}</span>`</span>)}</span>e-<span class=\"hljs-subst\">${decimals}</span>`</span>);\n\nround(<span class=\"hljs-number\">1.005</span>, <span class=\"hljs-number\">2</span>); <span class=\"hljs-comment\">// 1.01</span>\n\n</code></pre>\n<ol start=\"4\">\n<li>sumï¼šè®¡ç®—æ•°ç»„æˆ–å¤šä¸ªæ•°å­—çš„æ€»å’Œ</li>\n</ol>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> sum = <span class=\"hljs-function\">(<span class=\"hljs-params\">...arr</span>) =&gt;</span> [...arr].reduce(<span class=\"hljs-function\">(<span class=\"hljs-params\">acc, val</span>) =&gt;</span> acc + val, <span class=\"hljs-number\">0</span>);\n\nsum(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>); <span class=\"hljs-comment\">// 10</span>\nsum(...[<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>]); <span class=\"hljs-comment\">// 10</span>\n\n</code></pre>\n<ol start=\"5\">\n<li>toCurrencyï¼šç®€å•çš„è´§å¸å•ä½è½¬æ¢</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> toCurrency = <span class=\"hljs-function\">(<span class=\"hljs-params\">n, curr, LanguageFormat = <span class=\"hljs-literal\">undefined</span></span>) =&gt;</span>\n  <span class=\"hljs-built_in\">Intl</span>.NumberFormat(LanguageFormat, { <span class=\"hljs-attr\">style</span>: <span class=\"hljs-string\">'currency'</span>, <span class=\"hljs-attr\">currency</span>: curr }).format(n);\n  \ntoCurrency(<span class=\"hljs-number\">123456.789</span>, <span class=\"hljs-string\">'EUR'</span>); <span class=\"hljs-comment\">// â‚¬123,456.79</span>\ntoCurrency(<span class=\"hljs-number\">123456.789</span>, <span class=\"hljs-string\">'USD'</span>, <span class=\"hljs-string\">'en-us'</span>); <span class=\"hljs-comment\">// $123,456.79  </span>\ntoCurrency(<span class=\"hljs-number\">123456.789</span>, <span class=\"hljs-string\">'USD'</span>, <span class=\"hljs-string\">'fa'</span>); <span class=\"hljs-comment\">// Û±Û²Û³Ù¬Û´ÛµÛ¶Ù«Û·Û¹</span>\ntoCurrency(<span class=\"hljs-number\">322342436423.2435</span>, <span class=\"hljs-string\">'JPY'</span>); <span class=\"hljs-comment\">// Â¥322,342,436,423 </span>\n\n</code></pre>\n<h2>æµè§ˆå™¨æ“ä½œåŠå…¶å®ƒ</h2>\n<ol>\n<li>bottomVisibleï¼šæ£€æŸ¥é¡µé¢åº•éƒ¨æ˜¯å¦å¯è§</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> bottomVisible = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span>\n  <span class=\"hljs-built_in\">document</span>.documentElement.clientHeight + <span class=\"hljs-built_in\">window</span>.scrollY &gt;=\n  (<span class=\"hljs-built_in\">document</span>.documentElement.scrollHeight || <span class=\"hljs-built_in\">document</span>.documentElement.clientHeight);\n\nbottomVisible(); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"2\">\n<li>Create Directoryï¼šæ£€æŸ¥åˆ›å»ºç›®å½•</li>\n</ol>\n<p>æ­¤ä»£ç æ®µè°ƒç”¨fsæ¨¡å—çš„existsSync()æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™mkdirSync()åˆ›å»ºè¯¥ç›®å½•ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>);\n<span class=\"hljs-keyword\">const</span> createDirIfNotExists = <span class=\"hljs-function\"><span class=\"hljs-params\">dir</span> =&gt;</span> (!fs.existsSync(dir) ? fs.mkdirSync(dir) : <span class=\"hljs-literal\">undefined</span>);\ncreateDirIfNotExists(<span class=\"hljs-string\">'test'</span>); \n\n</code></pre>\n<ol start=\"3\">\n<li>currentURLï¼šè¿”å›å½“å‰é“¾æ¥url</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> currentURL = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> <span class=\"hljs-built_in\">window</span>.location.href;\n\ncurrentURL(); <span class=\"hljs-comment\">// 'https://juejin.im'</span>\n\n</code></pre>\n<ol start=\"4\">\n<li>distanceï¼šè¿”å›ä¸¤ç‚¹é—´çš„è·ç¦»</li>\n</ol>\n<p>è¯¥ä»£ç æ®µé€šè¿‡è®¡ç®—æ¬§å‡ é‡Œå¾—è·ç¦»æ¥è¿”å›ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> distance = <span class=\"hljs-function\">(<span class=\"hljs-params\">x0, y0, x1, y1</span>) =&gt;</span> <span class=\"hljs-built_in\">Math</span>.hypot(x1 - x0, y1 - y0);\n\ndistance(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>); <span class=\"hljs-comment\">// 2.23606797749979</span>\n\n</code></pre>\n<ol start=\"5\">\n<li>elementContainsï¼šæ£€æŸ¥æ˜¯å¦åŒ…å«å­å…ƒç´ \næ­¤ä»£ç æ®µæ£€æŸ¥çˆ¶å…ƒç´ æ˜¯å¦åŒ…å«å­å…ƒç´ ã€‚</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> elementContains = <span class=\"hljs-function\">(<span class=\"hljs-params\">parent, child</span>) =&gt;</span> parent !== child &amp;&amp; parent.contains(child);\n\nelementContains(<span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'head'</span>), <span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'title'</span>)); <span class=\"hljs-comment\">// true</span>\nelementContains(<span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'body'</span>), <span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'body'</span>)); <span class=\"hljs-comment\">// false</span>\n\n</code></pre>\n<ol start=\"6\">\n<li>getStyleï¼šè¿”å›æŒ‡å®šå…ƒç´ çš„ç”Ÿæ•ˆæ ·å¼</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> getStyle = <span class=\"hljs-function\">(<span class=\"hljs-params\">el, ruleName</span>) =&gt;</span> getComputedStyle(el)[ruleName];\n\ngetStyle(<span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'p'</span>), <span class=\"hljs-string\">'font-size'</span>); <span class=\"hljs-comment\">// '16px'</span>\n\n</code></pre>\n<ol start=\"7\">\n<li>getTypeï¼šè¿”å›å€¼æˆ–å˜é‡çš„ç±»å‹å</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> getType = <span class=\"hljs-function\"><span class=\"hljs-params\">v</span> =&gt;</span>\n  v === <span class=\"hljs-literal\">undefined</span> ? <span class=\"hljs-string\">'undefined'</span> : v === <span class=\"hljs-literal\">null</span> ? <span class=\"hljs-string\">'null'</span> : v.constructor.name.toLowerCase();\n  \ngetType(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Set</span>([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>])); <span class=\"hljs-comment\">// 'set'</span>\ngetType([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>]); <span class=\"hljs-comment\">// 'array'</span>\n\n</code></pre>\n<ol start=\"8\">\n<li>hasClassï¼šæ ¡éªŒæŒ‡å®šå…ƒç´ çš„ç±»å</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> hasClass = <span class=\"hljs-function\">(<span class=\"hljs-params\">el, className</span>) =&gt;</span> el.classList.contains(className);\nhasClass(<span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'p.special'</span>), <span class=\"hljs-string\">'special'</span>); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"9\">\n<li>hideï¼šéšè—æ‰€æœ‰çš„æŒ‡å®šæ ‡ç­¾</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> hide = <span class=\"hljs-function\">(<span class=\"hljs-params\">...el</span>) =&gt;</span> [...el].forEach(<span class=\"hljs-function\"><span class=\"hljs-params\">e</span> =&gt;</span> (e.style.display = <span class=\"hljs-string\">'none'</span>));\n\nhide(<span class=\"hljs-built_in\">document</span>.querySelectorAll(<span class=\"hljs-string\">'img'</span>)); <span class=\"hljs-comment\">// éšè—æ‰€æœ‰&lt;img&gt;æ ‡ç­¾</span>\n\n</code></pre>\n<ol start=\"10\">\n<li>httpsRedirectï¼šHTTP è·³è½¬ HTTPS</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> httpsRedirect = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">if</span> (location.protocol !== <span class=\"hljs-string\">'https:'</span>) location.replace(<span class=\"hljs-string\">'https://'</span> + location.href.split(<span class=\"hljs-string\">'//'</span>)[<span class=\"hljs-number\">1</span>]);\n};\n\nhttpsRedirect(); <span class=\"hljs-comment\">// è‹¥åœ¨`http://www.baidu.com`, åˆ™è·³è½¬åˆ°`https://www.baidu.com`</span>\n\n</code></pre>\n<ol start=\"11\">\n<li>insertAfterï¼šåœ¨æŒ‡å®šå…ƒç´ ä¹‹åæ’å…¥æ–°å…ƒç´ </li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> insertAfter = <span class=\"hljs-function\">(<span class=\"hljs-params\">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class=\"hljs-string\">'afterend'</span>, htmlString);\n\n<span class=\"hljs-comment\">// &lt;div id=\"myId\"&gt;...&lt;/div&gt; &lt;p&gt;after&lt;/p&gt;</span>\ninsertAfter(<span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'myId'</span>), <span class=\"hljs-string\">'&lt;p&gt;after&lt;/p&gt;'</span>); \n\n</code></pre>\n<ol start=\"12\">\n<li>insertBeforeï¼šåœ¨æŒ‡å®šå…ƒç´ ä¹‹å‰æ’å…¥æ–°å…ƒç´ </li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> insertBefore = <span class=\"hljs-function\">(<span class=\"hljs-params\">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class=\"hljs-string\">'beforebegin'</span>, htmlString);\n\ninsertBefore(<span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'myId'</span>), <span class=\"hljs-string\">'&lt;p&gt;before&lt;/p&gt;'</span>); <span class=\"hljs-comment\">// &lt;p&gt;before&lt;/p&gt; &lt;div id=\"myId\"&gt;...&lt;/div&gt;</span>\n\n</code></pre>\n<ol start=\"13\">\n<li>isBrowserï¼šæ£€æŸ¥æ˜¯å¦ä¸ºæµè§ˆå™¨ç¯å¢ƒ</li>\n</ol>\n<p>æ­¤ä»£ç æ®µå¯ç”¨äºç¡®å®šå½“å‰è¿è¡Œæ—¶ç¯å¢ƒæ˜¯å¦ä¸ºæµè§ˆå™¨ã€‚è¿™æœ‰åŠ©äºé¿å…åœ¨æœåŠ¡å™¨ï¼ˆèŠ‚ç‚¹ï¼‰ä¸Šè¿è¡Œå‰ç«¯æ¨¡å—æ—¶å‡ºé”™ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> isBrowser = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> ![<span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-built_in\">window</span>, <span class=\"hljs-keyword\">typeof</span> <span class=\"hljs-built_in\">document</span>].includes(<span class=\"hljs-string\">'undefined'</span>);\n\nisBrowser(); <span class=\"hljs-comment\">// true (browser)</span>\nisBrowser(); <span class=\"hljs-comment\">// false (Node)</span>\n\n</code></pre>\n<ol start=\"14\">\n<li>isBrowserTabï¼šæ£€æŸ¥å½“å‰æ ‡ç­¾é¡µæ˜¯å¦æ´»åŠ¨</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> isBrowserTabFocused = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> !<span class=\"hljs-built_in\">document</span>.hidden;\n\nisBrowserTabFocused(); <span class=\"hljs-comment\">// true</span>\n\n</code></pre>\n<ol start=\"15\">\n<li>nodeListToArrayï¼šè½¬æ¢nodeListä¸ºæ•°ç»„</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> nodeListToArray = <span class=\"hljs-function\"><span class=\"hljs-params\">nodeList</span> =&gt;</span> [...nodeList];\n\nnodeListToArray(<span class=\"hljs-built_in\">document</span>.childNodes); <span class=\"hljs-comment\">// [ &lt;!DOCTYPE html&gt;, html ]</span>\n\n</code></pre>\n<ol start=\"16\">\n<li>Random Hexadecimal Color Codeï¼šéšæœºåå…­è¿›åˆ¶é¢œè‰²</li>\n</ol>\n<pre><code class=\"language-js\">\n<span class=\"hljs-keyword\">const</span> randomHexColorCode = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">let</span> n = (<span class=\"hljs-built_in\">Math</span>.random() * <span class=\"hljs-number\">0xfffff</span> * <span class=\"hljs-number\">1000000</span>).toString(<span class=\"hljs-number\">16</span>);\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">'#'</span> + n.slice(<span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">6</span>);\n};\n\nrandomHexColorCode(); <span class=\"hljs-comment\">// \"#e34155\"</span>\n\n</code></pre>\n<ol start=\"17\">\n<li>scrollToTopï¼šå¹³æ»‘æ»šåŠ¨è‡³é¡¶éƒ¨</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> scrollToTop = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> c = <span class=\"hljs-built_in\">document</span>.documentElement.scrollTop || <span class=\"hljs-built_in\">document</span>.body.scrollTop;\n  <span class=\"hljs-keyword\">if</span> (c &gt; <span class=\"hljs-number\">0</span>) {\n    <span class=\"hljs-built_in\">window</span>.requestAnimationFrame(scrollToTop);\n    <span class=\"hljs-built_in\">window</span>.scrollTo(<span class=\"hljs-number\">0</span>, c - c / <span class=\"hljs-number\">8</span>);\n  }\n};\n\nscrollToTop();\n\n</code></pre>\n<ol start=\"18\">\n<li>smoothScrollï¼šæ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ åŒºåŸŸ</li>\n</ol>\n<p>è¯¥ä»£ç æ®µå¯å°†æŒ‡å®šå…ƒç´ å¹³æ»‘æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> smoothScroll = <span class=\"hljs-function\"><span class=\"hljs-params\">element</span> =&gt;</span>\n  <span class=\"hljs-built_in\">document</span>.querySelector(element).scrollIntoView({\n    <span class=\"hljs-attr\">behavior</span>: <span class=\"hljs-string\">'smooth'</span>\n  });\n  \nsmoothScroll(<span class=\"hljs-string\">'#fooBar'</span>); \nsmoothScroll(<span class=\"hljs-string\">'.fooBar'</span>); \n\n</code></pre>\n<ol start=\"19\">\n<li>detectDeviceTypeï¼šæ£€æµ‹ç§»åŠ¨/PCè®¾å¤‡</li>\n</ol>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> detectDeviceType = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span>\n  <span class=\"hljs-regexp\">/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i</span>.test(navigator.userAgent)\n    ? <span class=\"hljs-string\">'Mobile'</span>\n    : <span class=\"hljs-string\">'Desktop'</span>;\n\n</code></pre>\n<ol start=\"20\">\n<li>getScrollPositionï¼šè¿”å›å½“å‰çš„æ»šåŠ¨ä½ç½®</li>\n</ol>\n<p>é»˜è®¤å‚æ•°ä¸ºwindow ï¼ŒpageXOffset(pageYOffset)ä¸ºç¬¬ä¸€é€‰æ‹©ï¼Œæ²¡æœ‰åˆ™ç”¨scrollLeft(scrollTop)</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> getScrollPosition = <span class=\"hljs-function\">(<span class=\"hljs-params\">el = <span class=\"hljs-built_in\">window</span></span>) =&gt;</span> ({\n  <span class=\"hljs-attr\">x</span>: el.pageXOffset !== <span class=\"hljs-literal\">undefined</span> ? el.pageXOffset : el.scrollLeft,\n  <span class=\"hljs-attr\">y</span>: el.pageYOffset !== <span class=\"hljs-literal\">undefined</span> ? el.pageYOffset : el.scrollTop\n});\n\ngetScrollPosition(); <span class=\"hljs-comment\">// {x: 0, y: 200}</span>\n\n</code></pre>\n<ol start=\"21\">\n<li>sizeï¼šè·å–ä¸åŒç±»å‹å˜é‡çš„å­—èŠ‚é•¿åº¦</li>\n</ol>\n<p>è¿™ä¸ªçš„å®ç°éå¸¸å·§å¦™ï¼Œåˆ©ç”¨Blobç±»æ–‡ä»¶å¯¹è±¡çš„ç‰¹æ€§ï¼Œè·å–å¯¹è±¡çš„é•¿åº¦ã€‚</p>\n<p>å¦å¤–ï¼Œå¤šé‡ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œæ˜¯çœŸé¦™ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> size = <span class=\"hljs-function\"><span class=\"hljs-params\">val</span> =&gt;</span>\n  <span class=\"hljs-built_in\">Array</span>.isArray(val)\n    ? val.length\n    : val &amp;&amp; <span class=\"hljs-keyword\">typeof</span> val === <span class=\"hljs-string\">'object'</span>\n    ? val.size || val.length || <span class=\"hljs-built_in\">Object</span>.keys(val).length\n    : <span class=\"hljs-keyword\">typeof</span> val === <span class=\"hljs-string\">'string'</span>\n    ? <span class=\"hljs-keyword\">new</span> Blob([val]).size\n    : <span class=\"hljs-number\">0</span>;\n\nsize([<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>]); <span class=\"hljs-comment\">// 5</span>\nsize(<span class=\"hljs-string\">'size'</span>); <span class=\"hljs-comment\">// 4</span>\nsize({ <span class=\"hljs-attr\">one</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">two</span>: <span class=\"hljs-number\">2</span>, <span class=\"hljs-attr\">three</span>: <span class=\"hljs-number\">3</span> }); <span class=\"hljs-comment\">// 3</span>\n\n\n</code></pre>\n<ol start=\"22\">\n<li>escapeHTMLï¼šè½¬ä¹‰HTML</li>\n</ol>\n<p>å½“ç„¶æ˜¯ç”¨æ¥é˜²XSSæ”»å‡»å•¦ã€‚</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> escapeHTML = <span class=\"hljs-function\"><span class=\"hljs-params\">str</span> =&gt;</span>\n  str.replace(\n    <span class=\"hljs-regexp\">/[&amp;&lt;&gt;'\"]/g</span>,\n    tag =&gt;\n      ({\n        <span class=\"hljs-string\">'&amp;'</span>: <span class=\"hljs-string\">'&amp;amp;'</span>,\n        <span class=\"hljs-string\">'&lt;'</span>: <span class=\"hljs-string\">'&amp;lt;'</span>,\n        <span class=\"hljs-string\">'&gt;'</span>: <span class=\"hljs-string\">'&amp;gt;'</span>,\n        <span class=\"hljs-string\">\"'\"</span>: <span class=\"hljs-string\">'&amp;#39;'</span>,\n        <span class=\"hljs-string\">'\"'</span>: <span class=\"hljs-string\">'&amp;quot;'</span>\n      }[tag] || tag)\n  );\n\nescapeHTML(<span class=\"hljs-string\">'&lt;a href=\"#\"&gt;Me &amp; you&lt;/a&gt;'</span>); <span class=\"hljs-comment\">// '&amp;lt;a href=&amp;quot;#&amp;quot;&amp;gt;Me &amp;amp; you&amp;lt;/a&amp;gt;'</span>\n\n</code></pre>\n",
  "link": "\\zh-cn\\blog\\web\\js_tool_method.html",
  "meta": {}
}